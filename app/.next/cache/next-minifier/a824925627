{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{CDRK:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/viewLeave\",function(){return n(\"cty3\")}])},cty3:function(e,t,n){\"use strict\";n.r(t);var a=n(\"ln6h\"),c=n.n(a),s=n(\"9Jkg\"),r=n.n(s),o=n(\"q1tI\"),u=n.n(o),i=n(\"8Kt/\"),f=n.n(i),d=u.a.createElement,l=function(e,t){var n;return c.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:\"https://us-central1-teddybear-dev.cloudfunctions.net/api/staff/lineAuth\",n={userId:e,accessToken:t},fetch(\"https://us-central1-teddybear-dev.cloudfunctions.net/api/staff/lineAuth\",{method:\"post\",headers:{\"Content-Type\":\"application/json\"},body:r()(n)}).then((function(e){return e.text()})).then((function(e){if(e){alert(\"success\");var t=e.staff.ubn;alert(t);var n=e.staff.email,a=e.token.idToken;p(t,n,a)}else alert(\"lineAuth no result\")})).catch((function(e){alert(e.message)}));case 3:case\"end\":return a.stop()}}))},p=function(e,t,n){var a;return c.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:\"https://us-central1-teddybear-dev.cloudfunctions.net/api/leave/get\",a=\"https://us-central1-teddybear-dev.cloudfunctions.net/api/leave/get\"+\"?ubn=\".concat(e,\"&query=email&value=\").concat(t),fetch(a,{method:\"get\",headers:{Authorization:n}}).then((function(e){return e.text()})).then((function(e){e?alert(\"success\"):alert(\"getLeaves no result\")})).catch((function(e){alert(e.message)}));case 4:case\"end\":return c.stop()}}))};c.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:liff.init((function(e){var t=e.context.userId,n=liff.getAccessToken(),a={userId:t};fetch(\"https://us-central1-teddybear-dev.cloudfunctions.net/api/staff/checkExist\",{method:\"post\",headers:{\"Content-Type\":\"application/json\"},body:r()(a)}).then((function(e){return e.text()})).then((function(e){e?(alert(t),alert(n),l(t,n)):(alert(\"\\u8acb\\u767b\\u5165\\u4ee5\\u67e5\\u770b\\u5047\\u55ae\"),window.location.replace(\"https://teddybear-dev.firebaseapp.com/signIn\"))}))}),(function(e){alert(\"error\")}));case 1:case\"end\":return e.stop()}}));t.default=function(){return d(f.a,null,d(\"script\",{src:\"https://d.line-scdn.net/liff/1.0/sdk.js\"}))}}},[[\"CDRK\",1,0]]]);"}