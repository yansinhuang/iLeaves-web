{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{\"/eQG\":function(t,n,e){e(\"v5Dd\");var r=e(\"WEpk\").Object;t.exports=function(t,n){return r.getOwnPropertyDescriptor(t,n)}},\"4mXO\":function(t,n,e){t.exports=e(\"7TPF\")},\"5jIz\":function(t,n,e){\"use strict\";e.r(n),e.d(n,\"default\",(function(){return H}));var r=e(\"hfKm\"),o=e.n(r),i=e(\"2Eek\"),a=e.n(i),u=e(\"XoMD\"),c=e.n(u),s=e(\"Jo+v\"),f=e.n(s),l=e(\"4mXO\"),d=e.n(l),h=e(\"pLtp\"),p=e.n(h),v=e(\"vYYK\"),b=e(\"9Jkg\"),m=e.n(b),g=e(\"0iUn\"),y=e(\"sLSF\"),O=e(\"MI3g\"),j=e(\"a7VT\"),w=e(\"Tit0\"),k=e(\"rt45\"),x=e(\"q1tI\"),I=e.n(x),P=e(\"vOnD\"),T=e(\"KYPV\"),E=(e(\"vBfy\"),e(\"vcXL\")),F=e.n(E),A=e(\"Z3vd\"),C=e(\"8Kt/\"),D=e.n(C),z=e(\"vgmO\"),L=e.n(z),Y=(e(\"VrOB\"),e(\"YKRf\"),e(\"jkUL\")),K=e.n(Y),q=(e(\"Bb0u\"),I.a.createElement);function X(t,n){var e=p()(t);if(d.a){var r=d()(t);n&&(r=r.filter((function(n){return f()(t,n).enumerable}))),e.push.apply(e,r)}return e}function J(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?X(Object(e),!0).forEach((function(n){Object(v.a)(t,n,e[n])})):c.a?a()(t,c()(e)):X(Object(e)).forEach((function(n){o()(t,n,f()(e,n))}))}return t}function M(){var t=Object(k.a)([\"\\n  color: tomato;\\n  border-color: tomato;\\n  width: 80%;\\n\"]);return M=function(){return t},t}function N(){var t=Object(k.a)([\"\\n  width: 80%;\\n  variant: contained;\\n\"]);return N=function(){return t},t}function S(){var t=Object(k.a)([\"\\n  width: 60vw;\\n  margin: auto;\\n\"]);return S=function(){return t},t}function _(){var t=Object(k.a)([\"\\n  text-align: center;\\n  padding-top: 2em;\\n  padding-bottom: 2em;\\n\"]);return _=function(){return t},t}function B(){var t=Object(k.a)([\"\\n  background: #F7F9FA;\\n  height: 90vh;\\n  width: 80vw;\\n  margin: 5em auto;\\n  display:flex;\\n  align-items:center;\\n  justify-content:center;\\n  box-shadow: 5px 5px 5px 0px rgba(0, 0, 0, 0.4);\\n\\n  label {\\n    font-family: Candara;\\n    color: #1C2833;\\n    font-size: 1.2em;\\n    font-weight: 400;\\n  }\\n\"]);return B=function(){return t},t}function W(){var t=Object(k.a)([\"\\n  color: #F8F9F9;\\n  font-family: Candara;\\n  text-align: center;\\n  margin-bottom:-2em;\\n\"]);return W=function(){return t},t}function Z(){var t=Object(k.a)([\"\\n  margin: 5.5em auto;\\n  width: 80vw;\\n  height: 64vh;\\n  display:flex;\\n  align-items:center;\\n  justify-content:center;\\n\"]);return Z=function(){return t},t}function G(){var t=Object(k.a)([\"\\n  display: table;\\n  margin: 0 auto;\\n\"]);return G=function(){return t},t}e(\"5Buo\");e(\"ubkq\");var U=L.a.liff,V=P.a.div(G()),Q=P.a.div(Z()),R=(P.a.h2(W()),P.a.div(B()),Object(P.a)(T.Form)(_()),Object(P.a)(T.Field)(S()),Object(P.a)(A.a)(N())),H=(P.a.button(M()),function(t){function n(t){var e;return Object(g.a)(this,n),(e=Object(O.a)(this,Object(j.a)(n).call(this,t))).state={userId:null,latitude:null,longitude:null},e}return Object(w.a)(n,t),Object(y.a)(n,[{key:\"componentDidMount\",value:function(){this.liffInit(),this.getLocation()}},{key:\"liffInit\",value:function(){var t=this;try{U.init((function(n){var e=n.context.userId,r=U.getAccessToken(),o={userId:e};F()(\"https://us-central1-teddybear-dev.cloudfunctions.net/api/staff/checkExist\",{method:\"post\",headers:{\"Content-Type\":\"application/json\"},body:m()(o)}).then((function(t){return t.text()})).then((function(n){n?(t.setState({userId:e}),t.lineAuth(e,r)):(alert(\"\\u8acb\\u767b\\u5165\\u4ee5\\u67e5\\u770b\\u5047\\u55ae\"),L.a.location.replace(\"https://teddybear-dev.firebaseapp.com/signIn\"))}))}),(function(t){alert(t.message)}))}catch(n){next(n)}}},{key:\"lineAuth\",value:function(t,n){var e=this;try{var r={userId:t,accessToken:n};F()(\"https://us-central1-teddybear-dev.cloudfunctions.net/api/staff/lineAuth\",{method:\"post\",headers:{\"Content-Type\":\"application/json\"},body:m()(r)}).then((function(t){return t.json()})).then((function(t){if(t){var n=t.staff.ubn,r=(t.staff.department,t.staff.email),o=t.token.idToken;e.setState({Authorization:o,ubn:n,email:r})}else alert(\"lineAuth no result\")})).catch((function(t){alert(t.message)}))}catch(o){next(o)}}},{key:\"getLocation\",value:function(){try{alert(\"getLocation\"),navigator.geolocation.getCurrentPosition((function(t){var n=this;alert(t.coords.latitude),alert(t.coords.longitude);this.state.event;this.setState((function(){return{event:J({},n.state.event,{letitude:t.coords.latitude,longitude:t.coords.longitude})}}),(function(){this.props.updateEvent(this.props.event.id,this.state.event)})),alert(\"end!!\")}))}catch(t){alert(t),next(t)}}},{key:\"punchIn\",value:function(){try{F()(\"https://us-central1-teddybear-dev.cloudfunctions.net/api/punch/create\",{method:\"post\",headers:{Authorization:this.state.Authorization,ubn:this.state.ubn,\"Content-Type\":\"application/json\"},body:{latitude:this.state.latitude,longitude:this.state.longitude,type:\"in\",email:this.state.email}}).then((function(t){return t.text()})).then((function(t){t?alert(\"punch in success\"):alert(\"punch error\")})).catch((function(t){alert(t.message)}))}catch(t){next(t)}}},{key:\"render\",value:function(){var t=this;return q(Q,null,q(D.a,null,q(\"script\",{src:\"https://d.line-scdn.net/liff/1.0/sdk.js\"})),q(\"body\",{style:{background:\"#34495E\"}},q(Q,null,this.state.email?q(R,{fontFamily:\"Candara\",variant:\"contained\",color:\"secondary\",disabled:!this.state.latitude|!this.state.longitude,onClick:function(){t.punchIn()}},\"\\u7c3d\\u5230\"):q(V,null,q(K.a,{type:\"ThreeDots\",color:\"#f50057\",height:80,width:80})))))}}]),n}(x.Component))},\"7TPF\":function(t,n,e){e(\"AUvm\"),t.exports=e(\"WEpk\").Object.getOwnPropertySymbols},\"7m0m\":function(t,n,e){var r=e(\"Y7ZC\"),o=e(\"uplh\"),i=e(\"NsO/\"),a=e(\"vwuL\"),u=e(\"IP1Z\");r(r.S,\"Object\",{getOwnPropertyDescriptors:function(t){for(var n,e,r=i(t),c=a.f,s=o(r),f={},l=0;s.length>l;)void 0!==(e=c(r,n=s[l++]))&&u(f,n,e);return f}})},\"Jo+v\":function(t,n,e){t.exports=e(\"/eQG\")},Mqbl:function(t,n,e){var r=e(\"JB68\"),o=e(\"w6GO\");e(\"zn7N\")(\"keys\",(function(){return function(t){return o(r(t))}}))},XoMD:function(t,n,e){t.exports=e(\"hYAz\")},hYAz:function(t,n,e){e(\"7m0m\"),t.exports=e(\"WEpk\").Object.getOwnPropertyDescriptors},iq4v:function(t,n,e){e(\"Mqbl\"),t.exports=e(\"WEpk\").Object.keys},pLtp:function(t,n,e){t.exports=e(\"iq4v\")},tPI5:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/punchIn\",function(){return e(\"5jIz\")}])},uplh:function(t,n,e){var r=e(\"ar/p\"),o=e(\"mqlF\"),i=e(\"5K7Z\"),a=e(\"5T2Y\").Reflect;t.exports=a&&a.ownKeys||function(t){var n=r.f(i(t)),e=o.f;return e?n.concat(e(t)):n}},v5Dd:function(t,n,e){var r=e(\"NsO/\"),o=e(\"vwuL\").f;e(\"zn7N\")(\"getOwnPropertyDescriptor\",(function(){return function(t,n){return o(r(t),n)}}))},vYYK:function(t,n,e){\"use strict\";e.d(n,\"a\",(function(){return i}));var r=e(\"hfKm\"),o=e.n(r);function i(t,n,e){return n in t?o()(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}}},[[\"tPI5\",1,0]]]);"}