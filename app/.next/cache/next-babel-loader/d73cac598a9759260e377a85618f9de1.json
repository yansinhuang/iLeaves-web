{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/yan/ezbot-web/app/pages/viewSign.js\";\nvar __jsx = React.createElement;\nimport Head from 'next/head';\nimport React, { Component } from 'react';\nimport ReactTable from \"react-table\";\nimport styled from 'styled-components';\nimport \"react-table/react-table.css\";\nimport window from 'global';\nimport MonthPickerInput from 'react-month-picker-input';\nimport Loader from \"./loader\"; //import 'react-month-picker-input/dist/react-month-picker-input.css';\n//var MonthPickerInput = require('react-month-picker-input');\n\nrequire('react-month-picker-input/dist/react-month-picker-input.css');\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport Grid from '@material-ui/core/Grid';\nconst useStyles = makeStyles(theme => ({\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n    fullWidth: true\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2)\n  }\n}));\nconst liff = window.liff;\nconst BOX = styled.div`\n  margin: 5.5em auto;\n`;\nvar leaves;\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"handleRoleChange\", event => {\n      try {\n        this.setState({\n          role: event.target.value\n        }, () => {\n          //console.log(event.target.value);\n          //this.globalSearch();\n          if (event.target.value == \"substitute\") {\n            this.getLeavesSub(this.state.ubn, this.state.name, this.state.email, this.state.idToken);\n          } else if (event.target.value == \"supervisor\") {\n            this.getLeavesSuper(this.state.ubn, this.state.email, this.state.idToken);\n          }\n        });\n      } catch (err) {\n        throw err;\n      }\n    });\n\n    _defineProperty(this, \"handleStatusChange\", event => {\n      try {\n        this.setState({\n          status: event.target.value\n        }, () => {\n          //console.log(event.target.value);\n          this.globalSearch();\n        });\n      } catch (err) {\n        throw err;\n      }\n    });\n\n    _defineProperty(this, \"globalSearch\", () => {\n      try {\n        let role_select = this.state.role;\n        let status_select = this.state.status;\n        let filteredData = this.state.data_origin.filter(value => {\n          if (role_select == \"substitute\") {\n            switch (status_select) {\n              case \"signed\":\n                return value.status != \"等待簽核\";\n\n              case \"not signed\":\n                return value.status == \"等待簽核\";\n\n              default:\n                throw 'Option not supported';\n            }\n          } else if (role_select == \"supervisor\") {\n            switch (status_select) {\n              case \"signed\":\n                return value.status == \"同意 (主管)\" || value.status == \"拒絕 (主管)\";\n\n              case \"not signed\":\n                return value.status == \"同意 (代理人)\";\n\n              default:\n                throw 'Option not supported';\n            }\n          }\n        });\n        this.setState({\n          data: filteredData,\n          loading: false\n        });\n      } catch (err) {\n        throw err;\n      }\n    });\n\n    this.state = {\n      data: null,\n      data_origin: null,\n      role: \"substitute\",\n      status: \"not signed\"\n    };\n  }\n\n  componentDidMount() {\n    this.liffInit();\n  }\n\n  liffInit() {\n    try {\n      liff.init(data => {\n        const userId = data.context.userId;\n        const accessToken = liff.getAccessToken();\n        const URL_CHECKEXIST = \"https://us-central1-teddybear-dev.cloudfunctions.net/api/staff/checkExist\";\n        const body = {\n          userId: userId\n        };\n        fetch(URL_CHECKEXIST, {\n          method: 'post',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: _JSON$stringify(body)\n        }).then(res => {\n          return res.text();\n        }).then(result => {\n          if (result) {\n            this.lineAuth(userId, accessToken);\n          } else {\n            alert(\"請登入以查看假單\");\n            window.location.replace(\"https://teddybear-dev.firebaseapp.com/signIn\");\n          }\n        });\n      }, err => {\n        alert(\"error\");\n      });\n    } catch (err) {\n      throw err;\n    }\n  }\n\n  lineAuth(userId, accessToken) {\n    try {\n      const url = \"https://us-central1-teddybear-dev.cloudfunctions.net/api/staff/lineAuth\";\n      const body = {\n        userId: userId,\n        accessToken: accessToken\n      };\n      fetch(url, {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: _JSON$stringify(body)\n      }).then(res => {\n        return res.json();\n      }).then(result => {\n        if (result) {\n          const ubn = result.staff.ubn;\n          const email = result.staff.email;\n          const name = result.staff.name;\n          const idToken = result.token.idToken; //this.getLeaves(ubn, email, idToken);\n          //this.getLeavesSub(ubn, name, email, idToken);\n          //this.getLeavesSuper(ubn, email, idToken);\n\n          this.setState({\n            ubn: ubn,\n            name: name,\n            email: email,\n            idToken: idToken\n          });\n\n          if (this.state.role == \"substitute\") {\n            this.getLeavesSub(this.state.ubn, this.state.name, this.state.email, this.state.idToken);\n          } else if (this.state.role == \"supervisor\") {\n            this.getLeavesSuper(this.state.ubn, this.state.email, this.state.idToken);\n          }\n        } else {\n          alert(\"lineAuth no result\");\n        }\n      }).catch(function (error) {\n        alert(error.message);\n      });\n    } catch (err) {\n      throw err;\n    }\n  }\n\n  getLeavesSub(ubn, name, email, idToken) {\n    try {\n      this.setState({\n        loading: true\n      });\n      const URL_GETLEAVES = \"https://us-central1-teddybear-dev.cloudfunctions.net/api/leave/get\";\n      const url = URL_GETLEAVES + `?ubn=${ubn}&query=substitute&value={\"name\":\"${name}\",\"email\":\"${email}\"}`;\n      const header = {\n        Authorization: idToken\n      };\n      fetch(url, {\n        method: 'get',\n        headers: header\n      }).then(res => {\n        return res.json();\n      }).then(result => {\n        if (result) {\n          //alert(\"getLeavesSub success\");\n          this.convertData(result.list);\n        } else {\n          alert(\"getLeavesSub no result\");\n        }\n      }).catch(function (error) {\n        alert(error.message);\n      });\n    } catch (err) {\n      throw err;\n    }\n  }\n\n  getLeavesSuper(ubn, email, idToken) {\n    try {\n      this.setState({\n        loading: true\n      });\n      const URL_GETLEAVES = \"https://us-central1-teddybear-dev.cloudfunctions.net/api/leave/get\";\n      const url = URL_GETLEAVES + `?ubn=${ubn}&query=supervisor&value=${email}`;\n      const header = {\n        Authorization: idToken\n      };\n      fetch(url, {\n        method: 'get',\n        headers: header\n      }).then(res => {\n        return res.json();\n      }).then(result => {\n        if (result) {\n          //alert(\"getLeavesSuper success\");\n          this.convertData(result.list);\n        } else {\n          alert(\"getLeavesSuper no result\");\n        }\n      }).catch(function (error) {\n        alert(error.message);\n      });\n    } catch (err) {\n      throw err;\n    }\n  }\n\n  convertData(list) {\n    try {\n      var newList = [];\n\n      for (var i = 0; i < list.length; i++) {\n        const data = {\n          \"startDate\": list[i].startDate,\n          \"endDate\": list[i].endDate,\n          \"leaveType\": list[i].leaveType,\n          \"substitute\": JSON.parse(list[i].substitute).name,\n          \"status\": list[i].status,\n          \"leaveReason\": list[i].leaveReason,\n          \"rejectReason\": list[i].rejectReason\n        };\n        newList.push(data);\n      }\n\n      this.setState({\n        data_origin: newList,\n        loading: false\n      });\n      this.globalSearch();\n    } catch (err) {\n      throw err;\n    }\n  }\n\n  render() {\n    const MyLoader = () => __jsx(Loader, {\n      loading: this.state.loading,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285\n      },\n      __self: this\n    });\n\n    const columns = [{\n      Header: '開始日期',\n      accessor: 'startDate',\n      width: 90\n    }, {\n      Header: '結束日期',\n      accessor: 'endDate',\n      width: 90\n    }, {\n      Header: '假勤類別',\n      accessor: 'leaveType',\n      width: 90\n    }, {\n      Header: '代理人',\n      accessor: 'substitute',\n      show: false\n    }, {\n      Header: '簽核狀態',\n      accessor: 'status',\n      width: 90\n    }, {\n      Header: '請假原因',\n      accessor: 'leaveReason',\n      show: false\n    }, {\n      Header: '拒絕原因',\n      accessor: 'rejectReason',\n      show: false\n    }];\n    const classes = useStyles;\n    return __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318\n      },\n      __self: this\n    }, __jsx(Grid, {\n      container: true,\n      spacing: 2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319\n      },\n      __self: this\n    }, __jsx(Head, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320\n      },\n      __self: this\n    }, __jsx(\"script\", {\n      src: \"https://d.line-scdn.net/liff/1.0/sdk.js\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321\n      },\n      __self: this\n    })), __jsx(Grid, {\n      item: true,\n      xs: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323\n      },\n      __self: this\n    }, __jsx(FormControl, {\n      margin: \"normal\",\n      style: {\n        minWidth: 150\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324\n      },\n      __self: this\n    }, __jsx(InputLabel, {\n      id: \"role-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325\n      },\n      __self: this\n    }, \"\\u7C3D\\u6838\\u8EAB\\u4EFD\"), __jsx(Select, {\n      labelId: \"role-label\",\n      id: \"role\",\n      value: this.state.role,\n      onChange: this.handleRoleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326\n      },\n      __self: this\n    }, __jsx(MenuItem, {\n      value: \"substitute\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332\n      },\n      __self: this\n    }, \"\\u4EE3\\u7406\\u4EBA\"), __jsx(MenuItem, {\n      value: \"supervisor\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333\n      },\n      __self: this\n    }, \"\\u4E3B\\u7BA1\")))), __jsx(Grid, {\n      item: true,\n      xs: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338\n      },\n      __self: this\n    }, __jsx(FormControl, {\n      margin: \"normal\",\n      style: {\n        minWidth: 195\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339\n      },\n      __self: this\n    }, __jsx(InputLabel, {\n      id: \"status-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 340\n      },\n      __self: this\n    }, \"\\u7C3D\\u6838\\u72C0\\u614B\"), __jsx(Select, {\n      labelId: \"status-label\",\n      id: \"status\",\n      value: this.state.status,\n      onChange: this.handleStatusChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 341\n      },\n      __self: this\n    }, __jsx(MenuItem, {\n      value: \"not signed\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347\n      },\n      __self: this\n    }, \"\\u672A\\u7C3D\\u6838\"), __jsx(MenuItem, {\n      value: \"signed\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348\n      },\n      __self: this\n    }, \"\\u5DF2\\u7C3D\\u6838\")))), __jsx(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353\n      },\n      __self: this\n    }), __jsx(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354\n      },\n      __self: this\n    }), __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356\n      },\n      __self: this\n    }, this.state.data ? __jsx(ReactTable, {\n      data: this.state.data,\n      getTrProps: (state, rowInfo, column, instance) => ({\n        onClick: e => alert(`開始日期：${rowInfo.row.startDate}\\n結束日期：${rowInfo.row.endDate}\\n假勤類別：${rowInfo.row.leaveType}\\n代理人：${rowInfo.row.substitute}\\n簽核狀態：${rowInfo.row.status}\\n拒絕原因：${rowInfo.row.rejectReason}`)\n      }),\n      columns: columns,\n      defaultPageSize: 10,\n      pageSizeOptions: [10, 15],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 358\n      },\n      __self: this\n    }) : __jsx(ReactTable, {\n      LoadingComponent: MyLoader,\n      data: leaves,\n      columns: columns,\n      defaultPageSize: 10,\n      pageSizeOptions: [10, 15],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 368\n      },\n      __self: this\n    }))));\n  }\n\n}","map":{"version":3,"sources":["/Users/yan/ezbot-web/app/pages/viewSign.js"],"names":["Head","React","Component","ReactTable","styled","window","MonthPickerInput","Loader","require","makeStyles","InputLabel","MenuItem","FormHelperText","FormControl","Select","Grid","useStyles","theme","formControl","margin","spacing","minWidth","fullWidth","selectEmpty","marginTop","liff","BOX","div","leaves","App","constructor","props","event","setState","role","target","value","getLeavesSub","state","ubn","name","email","idToken","getLeavesSuper","err","status","globalSearch","role_select","status_select","filteredData","data_origin","filter","data","loading","componentDidMount","liffInit","init","userId","context","accessToken","getAccessToken","URL_CHECKEXIST","body","fetch","method","headers","then","res","text","result","lineAuth","alert","location","replace","url","json","staff","token","catch","error","message","URL_GETLEAVES","header","Authorization","convertData","list","newList","i","length","startDate","endDate","leaveType","JSON","parse","substitute","leaveReason","rejectReason","push","render","MyLoader","columns","Header","accessor","width","show","classes","handleRoleChange","handleStatusChange","rowInfo","column","instance","onClick","e","row"],"mappings":";;;;AAAA,OAAOA,IAAP,MAAiB,WAAjB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,UAAP,MAAuB,aAAvB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,OAAO,6BAAP;AACA,OAAOC,MAAP,MAAmB,QAAnB;AAEA,OAAOC,gBAAP,MAA6B,0BAA7B;AACA,OAAOC,MAAP,MAAmB,UAAnB,C,CACA;AACA;;AACAC,OAAO,CAAC,4DAAD,CAAP;;AAEA,SAASC,UAAT,QAA2B,0BAA3B;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,cAAP,MAA2B,kCAA3B;AACA,OAAOC,WAAP,MAAwB,+BAAxB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,MAAMC,SAAS,GAAGP,UAAU,CAACQ,KAAK,KAAK;AACrCC,EAAAA,WAAW,EAAE;AACXC,IAAAA,MAAM,EAAEF,KAAK,CAACG,OAAN,CAAc,CAAd,CADG;AAEXC,IAAAA,QAAQ,EAAE,GAFC;AAGXC,IAAAA,SAAS,EAAE;AAHA,GADwB;AAMrCC,EAAAA,WAAW,EAAE;AACXC,IAAAA,SAAS,EAAEP,KAAK,CAACG,OAAN,CAAc,CAAd;AADA;AANwB,CAAL,CAAN,CAA5B;AAYA,MAAMK,IAAI,GAAGpB,MAAM,CAACoB,IAApB;AACA,MAAMC,GAAG,GAAGtB,MAAM,CAACuB,GAAI;;CAAvB;AAIA,IAAIC,MAAJ;AAGA,eAAe,MAAMC,GAAN,SAAkB3B,SAAlB,CAA4B;AACzC4B,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,8CA+KAC,KAAK,IAAI;AAC1B,UAAG;AACD,aAAKC,QAAL,CAAc;AAAEC,UAAAA,IAAI,EAAEF,KAAK,CAACG,MAAN,CAAaC;AAArB,SAAd,EAA4C,MAAM;AAChD;AACA;AACA,cAAIJ,KAAK,CAACG,MAAN,CAAaC,KAAb,IAAsB,YAA1B,EAAwC;AACtC,iBAAKC,YAAL,CAAkB,KAAKC,KAAL,CAAWC,GAA7B,EAAkC,KAAKD,KAAL,CAAWE,IAA7C,EAAmD,KAAKF,KAAL,CAAWG,KAA9D,EAAqE,KAAKH,KAAL,CAAWI,OAAhF;AACD,WAFD,MAEO,IAAIV,KAAK,CAACG,MAAN,CAAaC,KAAb,IAAsB,YAA1B,EAAwC;AAC7C,iBAAKO,cAAL,CAAoB,KAAKL,KAAL,CAAWC,GAA/B,EAAoC,KAAKD,KAAL,CAAWG,KAA/C,EAAsD,KAAKH,KAAL,CAAWI,OAAjE;AACD;AACF,SARD;AASD,OAVD,CAUE,OAAOE,GAAP,EAAY;AACZ,cAAMA,GAAN;AACD;AACF,KA7LkB;;AAAA,gDA+LEZ,KAAK,IAAI;AAC5B,UAAG;AACD,aAAKC,QAAL,CAAc;AAAEY,UAAAA,MAAM,EAAEb,KAAK,CAACG,MAAN,CAAaC;AAAvB,SAAd,EAA8C,MAAM;AAClD;AACA,eAAKU,YAAL;AACD,SAHD;AAID,OALD,CAKE,OAAOF,GAAP,EAAY;AACZ,cAAMA,GAAN;AACD;AACF,KAxMkB;;AAAA,0CA0MJ,MAAM;AACnB,UAAI;AACF,YAAIG,WAAW,GAAG,KAAKT,KAAL,CAAWJ,IAA7B;AACA,YAAIc,aAAa,GAAG,KAAKV,KAAL,CAAWO,MAA/B;AAEA,YAAII,YAAY,GAAG,KAAKX,KAAL,CAAWY,WAAX,CAAuBC,MAAvB,CAA8Bf,KAAK,IAAI;AACxD,cAAIW,WAAW,IAAI,YAAnB,EAAiC;AAC/B,oBAAQC,aAAR;AACE,mBAAK,QAAL;AACE,uBACEZ,KAAK,CAACS,MAAN,IAAgB,MADlB;;AAGF,mBAAK,YAAL;AACE,uBACET,KAAK,CAACS,MAAN,IAAgB,MADlB;;AAGF;AACE,sBAAM,sBAAN;AAVJ;AAYD,WAbD,MAaO,IAAIE,WAAW,IAAI,YAAnB,EAAiC;AACtC,oBAAQC,aAAR;AACE,mBAAK,QAAL;AACE,uBACEZ,KAAK,CAACS,MAAN,IAAgB,SAAhB,IAA6BT,KAAK,CAACS,MAAN,IAAgB,SAD/C;;AAGF,mBAAK,YAAL;AACE,uBACET,KAAK,CAACS,MAAN,IAAgB,UADlB;;AAGF;AACE,sBAAM,sBAAN;AAVJ;AAYD;AACF,SA5BkB,CAAnB;AA6BA,aAAKZ,QAAL,CAAc;AAAEmB,UAAAA,IAAI,EAAEH,YAAR;AAAsBI,UAAAA,OAAO,EAAE;AAA/B,SAAd;AACD,OAlCD,CAkCE,OAAOT,GAAP,EAAY;AACZ,cAAMA,GAAN;AACD;AACF,KAhPkB;;AAEjB,SAAKN,KAAL,GAAa;AACXc,MAAAA,IAAI,EAAG,IADI;AAEXF,MAAAA,WAAW,EAAG,IAFH;AAGXhB,MAAAA,IAAI,EAAG,YAHI;AAIXW,MAAAA,MAAM,EAAE;AAJG,KAAb;AAMD;;AAEDS,EAAAA,iBAAiB,GAAG;AAClB,SAAKC,QAAL;AACD;;AAEDA,EAAAA,QAAQ,GAAG;AACT,QAAI;AACF9B,MAAAA,IAAI,CAAC+B,IAAL,CAAUJ,IAAI,IAAI;AAChB,cAAMK,MAAM,GAAGL,IAAI,CAACM,OAAL,CAAaD,MAA5B;AACA,cAAME,WAAW,GAAGlC,IAAI,CAACmC,cAAL,EAApB;AACA,cAAMC,cAAc,GAAG,2EAAvB;AACA,cAAMC,IAAI,GAAG;AACXL,UAAAA,MAAM,EAAEA;AADG,SAAb;AAGAM,QAAAA,KAAK,CAACF,cAAD,EAAiB;AACpBG,UAAAA,MAAM,EAAE,MADY;AAEpBC,UAAAA,OAAO,EAAE;AACP,4BAAgB;AADT,WAFW;AAKpBH,UAAAA,IAAI,EAAE,gBAAeA,IAAf;AALc,SAAjB,CAAL,CAMGI,IANH,CAMSC,GAAD,IAAS;AACf,iBAAOA,GAAG,CAACC,IAAJ,EAAP;AACD,SARD,EAQGF,IARH,CAQQG,MAAM,IAAI;AAChB,cAAIA,MAAJ,EAAY;AACR,iBAAKC,QAAL,CAAcb,MAAd,EAAsBE,WAAtB;AACH,WAFD,MAEO;AACHY,YAAAA,KAAK,CAAC,UAAD,CAAL;AACAlE,YAAAA,MAAM,CAACmE,QAAP,CAAgBC,OAAhB,CAAwB,8CAAxB;AACH;AACF,SAfD;AAgBD,OAvBD,EAuBG7B,GAAG,IAAI;AACR2B,QAAAA,KAAK,CAAC,OAAD,CAAL;AACD,OAzBD;AA0BD,KA3BD,CA2BE,OAAO3B,GAAP,EAAY;AACZ,YAAMA,GAAN;AACD;AACF;;AAED0B,EAAAA,QAAQ,CAAEb,MAAF,EAAUE,WAAV,EAAwB;AAC9B,QAAI;AACF,YAAMe,GAAG,GAAG,yEAAZ;AACA,YAAMZ,IAAI,GAAG;AACTL,QAAAA,MAAM,EAAEA,MADC;AAETE,QAAAA,WAAW,EAAEA;AAFJ,OAAb;AAIAI,MAAAA,KAAK,CAACW,GAAD,EAAM;AACPV,QAAAA,MAAM,EAAE,MADD;AAEPC,QAAAA,OAAO,EAAE;AACP,0BAAgB;AADT,SAFF;AAKPH,QAAAA,IAAI,EAAE,gBAAeA,IAAf;AALC,OAAN,CAAL,CAMKI,IANL,CAMWC,GAAD,IAAS;AACf,eAAOA,GAAG,CAACQ,IAAJ,EAAP;AACD,OARH,EAQKT,IARL,CAQUG,MAAM,IAAI;AAChB,YAAIA,MAAJ,EAAY;AACR,gBAAM9B,GAAG,GAAG8B,MAAM,CAACO,KAAP,CAAarC,GAAzB;AACA,gBAAME,KAAK,GAAG4B,MAAM,CAACO,KAAP,CAAanC,KAA3B;AACA,gBAAMD,IAAI,GAAG6B,MAAM,CAACO,KAAP,CAAapC,IAA1B;AACA,gBAAME,OAAO,GAAG2B,MAAM,CAACQ,KAAP,CAAanC,OAA7B,CAJQ,CAKR;AACA;AACA;;AACA,eAAKT,QAAL,CAAc;AACZM,YAAAA,GAAG,EAAEA,GADO;AAEZC,YAAAA,IAAI,EAAEA,IAFM;AAGZC,YAAAA,KAAK,EAAEA,KAHK;AAIZC,YAAAA,OAAO,EAAEA;AAJG,WAAd;;AAMA,cAAI,KAAKJ,KAAL,CAAWJ,IAAX,IAAmB,YAAvB,EAAqC;AACnC,iBAAKG,YAAL,CAAkB,KAAKC,KAAL,CAAWC,GAA7B,EAAkC,KAAKD,KAAL,CAAWE,IAA7C,EAAmD,KAAKF,KAAL,CAAWG,KAA9D,EAAqE,KAAKH,KAAL,CAAWI,OAAhF;AACD,WAFD,MAEO,IAAI,KAAKJ,KAAL,CAAWJ,IAAX,IAAmB,YAAvB,EAAqC;AAC1C,iBAAKS,cAAL,CAAoB,KAAKL,KAAL,CAAWC,GAA/B,EAAoC,KAAKD,KAAL,CAAWG,KAA/C,EAAsD,KAAKH,KAAL,CAAWI,OAAjE;AACD;AACJ,SAnBD,MAmBO;AACH6B,UAAAA,KAAK,CAAC,oBAAD,CAAL;AAEH;AACF,OAhCH,EAgCKO,KAhCL,CAgCW,UAAUC,KAAV,EAAiB;AACxBR,QAAAA,KAAK,CAACQ,KAAK,CAACC,OAAP,CAAL;AACD,OAlCH;AAmCC,KAzCH,CAyCI,OAAOpC,GAAP,EAAY;AACZ,YAAMA,GAAN;AACD;AACJ;;AAEDP,EAAAA,YAAY,CAAEE,GAAF,EAAOC,IAAP,EAAaC,KAAb,EAAoBC,OAApB,EAA6B;AACvC,QAAI;AACF,WAAKT,QAAL,CAAc;AAAEoB,QAAAA,OAAO,EAAE;AAAX,OAAd;AACA,YAAM4B,aAAa,GAAG,oEAAtB;AACA,YAAMP,GAAG,GAAGO,aAAa,GAAI,QAAO1C,GAAI,oCAAmCC,IAAK,cAAaC,KAAM,IAAnG;AACA,YAAMyC,MAAM,GAAG;AACXC,QAAAA,aAAa,EAAEzC;AADJ,OAAf;AAGAqB,MAAAA,KAAK,CAACW,GAAD,EAAM;AACPV,QAAAA,MAAM,EAAE,KADD;AAEPC,QAAAA,OAAO,EAAEiB;AAFF,OAAN,CAAL,CAGGhB,IAHH,CAGSC,GAAD,IAAS;AACb,eAAOA,GAAG,CAACQ,IAAJ,EAAP;AACH,OALD,EAKGT,IALH,CAKQG,MAAM,IAAI;AACd,YAAIA,MAAJ,EAAY;AACV;AACA,eAAKe,WAAL,CAAiBf,MAAM,CAACgB,IAAxB;AACL,SAHG,MAGG;AACHd,UAAAA,KAAK,CAAC,wBAAD,CAAL;AACH;AACA,OAZD,EAYGO,KAZH,CAYS,UAAUC,KAAV,EAAiB;AACtBR,QAAAA,KAAK,CAACQ,KAAK,CAACC,OAAP,CAAL;AACH,OAdD;AAeD,KAtBD,CAsBE,OAAOpC,GAAP,EAAY;AACZ,YAAMA,GAAN;AACD;AACF;;AAEDD,EAAAA,cAAc,CAAEJ,GAAF,EAAOE,KAAP,EAAcC,OAAd,EAAuB;AACnC,QAAI;AACF,WAAKT,QAAL,CAAc;AAAEoB,QAAAA,OAAO,EAAE;AAAX,OAAd;AACA,YAAM4B,aAAa,GAAG,oEAAtB;AACA,YAAMP,GAAG,GAAGO,aAAa,GAAI,QAAO1C,GAAI,2BAA0BE,KAAM,EAAxE;AACA,YAAMyC,MAAM,GAAG;AACXC,QAAAA,aAAa,EAAEzC;AADJ,OAAf;AAGAqB,MAAAA,KAAK,CAACW,GAAD,EAAM;AACPV,QAAAA,MAAM,EAAE,KADD;AAEPC,QAAAA,OAAO,EAAEiB;AAFF,OAAN,CAAL,CAGGhB,IAHH,CAGSC,GAAD,IAAS;AACb,eAAOA,GAAG,CAACQ,IAAJ,EAAP;AACH,OALD,EAKGT,IALH,CAKQG,MAAM,IAAI;AACd,YAAIA,MAAJ,EAAY;AACV;AACA,eAAKe,WAAL,CAAiBf,MAAM,CAACgB,IAAxB;AACL,SAHG,MAGG;AACHd,UAAAA,KAAK,CAAC,0BAAD,CAAL;AACH;AACA,OAZD,EAYGO,KAZH,CAYS,UAAUC,KAAV,EAAiB;AACtBR,QAAAA,KAAK,CAACQ,KAAK,CAACC,OAAP,CAAL;AACH,OAdD;AAeD,KAtBD,CAsBE,OAAOpC,GAAP,EAAY;AACZ,YAAMA,GAAN;AACD;AACF;;AAEDwC,EAAAA,WAAW,CAAEC,IAAF,EAAS;AAClB,QAAI;AACF,UAAIC,OAAO,GAAG,EAAd;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,IAAI,CAACG,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AACpC,cAAMnC,IAAI,GAAG;AACX,uBAAaiC,IAAI,CAACE,CAAD,CAAJ,CAAQE,SADV;AAEX,qBAAWJ,IAAI,CAACE,CAAD,CAAJ,CAAQG,OAFR;AAGX,uBAAaL,IAAI,CAACE,CAAD,CAAJ,CAAQI,SAHV;AAIX,wBAAcC,IAAI,CAACC,KAAL,CAAWR,IAAI,CAACE,CAAD,CAAJ,CAAQO,UAAnB,EAA+BtD,IAJlC;AAKX,oBAAU6C,IAAI,CAACE,CAAD,CAAJ,CAAQ1C,MALP;AAMX,yBAAewC,IAAI,CAACE,CAAD,CAAJ,CAAQQ,WANZ;AAOX,0BAAgBV,IAAI,CAACE,CAAD,CAAJ,CAAQS;AAPb,SAAb;AASAV,QAAAA,OAAO,CAACW,IAAR,CAAa7C,IAAb;AACD;;AACD,WAAKnB,QAAL,CAAc;AACZiB,QAAAA,WAAW,EAAEoC,OADD;AAEZjC,QAAAA,OAAO,EAAE;AAFG,OAAd;AAIA,WAAKP,YAAL;AACD,KAnBD,CAmBE,OAAOF,GAAP,EAAY;AACZ,YAAMA,GAAN;AACD;AACF;;AAqEDsD,EAAAA,MAAM,GAAG;AACP,UAAMC,QAAQ,GAAG,MAAM,MAAC,MAAD;AAAQ,MAAA,OAAO,EAAE,KAAK7D,KAAL,CAAWe,OAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAvB;;AACA,UAAM+C,OAAO,GAAG,CAAC;AACfC,MAAAA,MAAM,EAAE,MADO;AAEfC,MAAAA,QAAQ,EAAE,WAFK;AAGfC,MAAAA,KAAK,EAAE;AAHQ,KAAD,EAId;AACAF,MAAAA,MAAM,EAAE,MADR;AAEAC,MAAAA,QAAQ,EAAE,SAFV;AAGAC,MAAAA,KAAK,EAAE;AAHP,KAJc,EAQd;AACAF,MAAAA,MAAM,EAAE,MADR;AAEAC,MAAAA,QAAQ,EAAE,WAFV;AAGAC,MAAAA,KAAK,EAAE;AAHP,KARc,EAYd;AACAF,MAAAA,MAAM,EAAE,KADR;AAEAC,MAAAA,QAAQ,EAAE,YAFV;AAGAE,MAAAA,IAAI,EAAE;AAHN,KAZc,EAgBd;AACAH,MAAAA,MAAM,EAAE,MADR;AAEAC,MAAAA,QAAQ,EAAE,QAFV;AAGAC,MAAAA,KAAK,EAAE;AAHP,KAhBc,EAoBd;AACAF,MAAAA,MAAM,EAAE,MADR;AAEAC,MAAAA,QAAQ,EAAE,aAFV;AAGAE,MAAAA,IAAI,EAAE;AAHN,KApBc,EAwBd;AACAH,MAAAA,MAAM,EAAE,MADR;AAEAC,MAAAA,QAAQ,EAAE,cAFV;AAGAE,MAAAA,IAAI,EAAE;AAHN,KAxBc,CAAhB;AA6BA,UAAMC,OAAO,GAAGzF,SAAhB;AAEA,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,MAAC,IAAD;AAAM,MAAA,SAAS,MAAf;AAAgB,MAAA,OAAO,EAAE,CAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAQ,MAAA,GAAG,EAAC,yCAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADA,EAIA,MAAC,IAAD;AAAM,MAAA,IAAI,MAAV;AAAW,MAAA,EAAE,EAAE,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA,MAAC,WAAD;AAAa,MAAA,MAAM,EAAC,QAApB;AAA6B,MAAA,KAAK,EAAE;AAACK,QAAAA,QAAQ,EAAE;AAAX,OAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,MAAC,UAAD;AAAY,MAAA,EAAE,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADF,EAEE,MAAC,MAAD;AACE,MAAA,OAAO,EAAC,YADV;AAEE,MAAA,EAAE,EAAC,MAFL;AAGE,MAAA,KAAK,EAAE,KAAKiB,KAAL,CAAWJ,IAHpB;AAIE,MAAA,QAAQ,EAAE,KAAKwE,gBAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAME,MAAC,QAAD;AAAU,MAAA,KAAK,EAAE,YAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BANF,EAOE,MAAC,QAAD;AAAU,MAAA,KAAK,EAAE,YAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAPF,CAFF,CADA,CAJA,EAmBA,MAAC,IAAD;AAAM,MAAA,IAAI,MAAV;AAAW,MAAA,EAAE,EAAE,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA,MAAC,WAAD;AAAa,MAAA,MAAM,EAAC,QAApB;AAA6B,MAAA,KAAK,EAAE;AAACrF,QAAAA,QAAQ,EAAE;AAAX,OAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,MAAC,UAAD;AAAY,MAAA,EAAE,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADF,EAEE,MAAC,MAAD;AACE,MAAA,OAAO,EAAC,cADV;AAEE,MAAA,EAAE,EAAC,QAFL;AAGE,MAAA,KAAK,EAAE,KAAKiB,KAAL,CAAWO,MAHpB;AAIE,MAAA,QAAQ,EAAE,KAAK8D,kBAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAME,MAAC,QAAD;AAAU,MAAA,KAAK,EAAE,YAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BANF,EAOE,MAAC,QAAD;AAAU,MAAA,KAAK,EAAE,QAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAPF,CAFF,CADA,CAnBA,EAkCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAlCA,EAmCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAnCA,EAqCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKrE,KAAL,CAAWc,IAAX,GACC,MAAC,UAAD;AACE,MAAA,IAAI,EAAE,KAAKd,KAAL,CAAWc,IADnB;AAEE,MAAA,UAAU,EAAE,CAACd,KAAD,EAAQsE,OAAR,EAAiBC,MAAjB,EAAyBC,QAAzB,MAAuC;AACjDC,QAAAA,OAAO,EAAEC,CAAC,IAAIzC,KAAK,CACpB,QAAOqC,OAAO,CAACK,GAAR,CAAYxB,SAAU,UAASmB,OAAO,CAACK,GAAR,CAAYvB,OAAQ,UAASkB,OAAO,CAACK,GAAR,CAAYtB,SAAU,SAAQiB,OAAO,CAACK,GAAR,CAAYnB,UAAW,UAASc,OAAO,CAACK,GAAR,CAAYpE,MAAO,UAAS+D,OAAO,CAACK,GAAR,CAAYjB,YAAa,EADlK;AAD8B,OAAvC,CAFd;AAME,MAAA,OAAO,EAAEI,OANX;AAOE,MAAA,eAAe,EAAI,EAPrB;AAQE,MAAA,eAAe,EAAI,CAAC,EAAD,EAAK,EAAL,CARrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,GAWC,MAAC,UAAD;AACE,MAAA,gBAAgB,EAAED,QADpB;AAEE,MAAA,IAAI,EAAEvE,MAFR;AAGE,MAAA,OAAO,EAAEwE,OAHX;AAIE,MAAA,eAAe,EAAI,EAJrB;AAKE,MAAA,eAAe,EAAI,CAAC,EAAD,EAAK,EAAL,CALrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAZJ,CArCA,CADF,CADF;AA+DD;;AAnVwC","sourcesContent":["import Head from 'next/head';\nimport React, { Component } from 'react';\nimport ReactTable from \"react-table\";\nimport styled from 'styled-components';\nimport \"react-table/react-table.css\";\nimport window from 'global'\n\nimport MonthPickerInput from 'react-month-picker-input';\nimport Loader from \"./loader\";\n//import 'react-month-picker-input/dist/react-month-picker-input.css';\n//var MonthPickerInput = require('react-month-picker-input');\nrequire('react-month-picker-input/dist/react-month-picker-input.css');\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport Grid from '@material-ui/core/Grid';\nconst useStyles = makeStyles(theme => ({\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n    fullWidth: true,\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n}));\n\n\nconst liff = window.liff;\nconst BOX = styled.div`\n  margin: 5.5em auto;\n`;\n\nvar leaves;\n\n\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data : null,\n      data_origin : null,\n      role : \"substitute\",\n      status: \"not signed\"\n    };\n  }\n\n  componentDidMount() {\n    this.liffInit();\n  }\n\n  liffInit() {\n    try {\n      liff.init(data => {\n        const userId = data.context.userId;\n        const accessToken = liff.getAccessToken();\n        const URL_CHECKEXIST = \"https://us-central1-teddybear-dev.cloudfunctions.net/api/staff/checkExist\";\n        const body = {\n          userId: userId\n        };\n        fetch(URL_CHECKEXIST, {\n          method: 'post',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(body)\n        }).then((res) => {\n          return res.text();\n        }).then(result => {\n          if (result) {\n              this.lineAuth(userId, accessToken);\n          } else {\n              alert(\"請登入以查看假單\");\n              window.location.replace(\"https://teddybear-dev.firebaseapp.com/signIn\");\n          }\n        })\n      }, err => {\n        alert(\"error\");\n      });\n    } catch (err) {\n      throw(err);\n    }\n  }\n  \n  lineAuth (userId, accessToken)  {\n    try {\n      const url = \"https://us-central1-teddybear-dev.cloudfunctions.net/api/staff/lineAuth\";\n      const body = {\n          userId: userId,\n          accessToken: accessToken\n        };\n      fetch(url, {\n          method: 'post',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(body)\n        }).then((res) => {\n          return res.json();\n        }).then(result => {\n          if (result) {\n              const ubn = result.staff.ubn;\n              const email = result.staff.email;\n              const name = result.staff.name;\n              const idToken = result.token.idToken;\n              //this.getLeaves(ubn, email, idToken);\n              //this.getLeavesSub(ubn, name, email, idToken);\n              //this.getLeavesSuper(ubn, email, idToken);\n              this.setState({\n                ubn: ubn,\n                name: name,\n                email: email,\n                idToken: idToken\n              })\n              if (this.state.role == \"substitute\") {\n                this.getLeavesSub(this.state.ubn, this.state.name, this.state.email, this.state.idToken);\n              } else if (this.state.role == \"supervisor\") {\n                this.getLeavesSuper(this.state.ubn, this.state.email, this.state.idToken);\n              }\n          } else {\n              alert(\"lineAuth no result\");\n\n          }\n        }).catch(function (error) {\n          alert(error.message);\n        })\n      } catch (err) {\n        throw(err);\n      }\n  }\n\n  getLeavesSub (ubn, name, email, idToken) {\n    try {\n      this.setState({ loading: true });\n      const URL_GETLEAVES = \"https://us-central1-teddybear-dev.cloudfunctions.net/api/leave/get\";\n      const url = URL_GETLEAVES + `?ubn=${ubn}&query=substitute&value={\"name\":\"${name}\",\"email\":\"${email}\"}`;\n      const header = {\n          Authorization: idToken\n        };\n      fetch(url, {\n          method: 'get',\n          headers: header\n      }).then((res) => {\n          return res.json();\n      }).then(result => {\n          if (result) {\n            //alert(\"getLeavesSub success\");\n            this.convertData(result.list);\n      } else {\n          alert(\"getLeavesSub no result\");\n      }\n      }).catch(function (error) {\n          alert(error.message);\n      })\n    } catch (err) {\n      throw(err);\n    }\n  }\n\n  getLeavesSuper (ubn, email, idToken) {\n    try {\n      this.setState({ loading: true });\n      const URL_GETLEAVES = \"https://us-central1-teddybear-dev.cloudfunctions.net/api/leave/get\";\n      const url = URL_GETLEAVES + `?ubn=${ubn}&query=supervisor&value=${email}`;\n      const header = {\n          Authorization: idToken\n        };\n      fetch(url, {\n          method: 'get',\n          headers: header\n      }).then((res) => {\n          return res.json();\n      }).then(result => {\n          if (result) {\n            //alert(\"getLeavesSuper success\");\n            this.convertData(result.list);\n      } else {\n          alert(\"getLeavesSuper no result\");\n      }\n      }).catch(function (error) {\n          alert(error.message);\n      })\n    } catch (err) {\n      throw(err);\n    }\n  }\n\n  convertData (list)  {\n    try {\n      var newList = [];\n      for (var i = 0; i < list.length; i++) {\n        const data = {\n          \"startDate\": list[i].startDate,\n          \"endDate\": list[i].endDate,\n          \"leaveType\": list[i].leaveType,\n          \"substitute\": JSON.parse(list[i].substitute).name,\n          \"status\": list[i].status,\n          \"leaveReason\": list[i].leaveReason,\n          \"rejectReason\": list[i].rejectReason\n        };\n        newList.push(data);\n      }\n      this.setState({\n        data_origin: newList,\n        loading: false \n      })\n      this.globalSearch();\n    } catch (err) {\n      throw(err);\n    }\n  }\n\n  handleRoleChange = event => {\n    try{\n      this.setState({ role: event.target.value }, () => {\n        //console.log(event.target.value);\n        //this.globalSearch();\n        if (event.target.value == \"substitute\") {\n          this.getLeavesSub(this.state.ubn, this.state.name, this.state.email, this.state.idToken);\n        } else if (event.target.value == \"supervisor\") {\n          this.getLeavesSuper(this.state.ubn, this.state.email, this.state.idToken);\n        }\n      });\n    } catch (err) {\n      throw(err);\n    }\n  };\n\n  handleStatusChange = event => {\n    try{\n      this.setState({ status: event.target.value }, () => {\n        //console.log(event.target.value);\n        this.globalSearch();\n      });\n    } catch (err) {\n      throw(err);\n    }\n  };\n\n  globalSearch = () => {\n    try {\n      let role_select = this.state.role;\n      let status_select = this.state.status;\n\n      let filteredData = this.state.data_origin.filter(value => {\n        if (role_select == \"substitute\") {\n          switch (status_select) {\n            case \"signed\":\n              return (  \n                value.status != \"等待簽核\"    \n              );\n            case \"not signed\":\n              return (  \n                value.status == \"等待簽核\"    \n              );\n            default:\n              throw 'Option not supported';\n          }\n        } else if (role_select == \"supervisor\") {\n          switch (status_select) {\n            case \"signed\":\n              return (  \n                value.status == \"同意 (主管)\" || value.status == \"拒絕 (主管)\"    \n              );\n            case \"not signed\":\n              return (  \n                value.status == \"同意 (代理人)\"   \n              );\n            default:\n              throw 'Option not supported';\n          }\n        }\n      });\n      this.setState({ data: filteredData, loading: false });\n    } catch (err) {\n      throw(err);\n    }\n  };\n  \n  render() {\n    const MyLoader = () => <Loader loading={this.state.loading} />;\n    const columns = [{\n      Header: '開始日期',\n      accessor: 'startDate',\n      width: 90\n    },{\n      Header: '結束日期',\n      accessor: 'endDate',\n      width: 90\n    },{\n      Header: '假勤類別',\n      accessor: 'leaveType',\n      width: 90\n    },{\n      Header: '代理人',\n      accessor: 'substitute',\n      show: false\n    },{\n      Header: '簽核狀態',\n      accessor: 'status',\n      width: 90\n    },{\n      Header: '請假原因',\n      accessor: 'leaveReason',\n      show: false\n    },{\n      Header: '拒絕原因',\n      accessor: 'rejectReason',\n      show: false\n    }];\n    const classes = useStyles;\n\n    return (\n      <div>\n        <Grid container spacing={2}>\n        <Head>\n          <script src=\"https://d.line-scdn.net/liff/1.0/sdk.js\"></script>\n        </Head>\n        <Grid item xs={12}>\n        <FormControl margin=\"normal\" style={{minWidth: 150}} >\n          <InputLabel id=\"role-label\">簽核身份</InputLabel>\n          <Select\n            labelId=\"role-label\"\n            id=\"role\"\n            value={this.state.role}\n            onChange={this.handleRoleChange}\n          >\n            <MenuItem value={\"substitute\"}>代理人</MenuItem>\n            <MenuItem value={\"supervisor\"}>主管</MenuItem>\n          </Select>\n        </FormControl>\n        </Grid>\n\n        <Grid item xs={12}>\n        <FormControl margin=\"normal\" style={{minWidth: 195}}>\n          <InputLabel id=\"status-label\">簽核狀態</InputLabel>\n          <Select\n            labelId=\"status-label\"\n            id=\"status\"\n            value={this.state.status}\n            onChange={this.handleStatusChange}\n          >\n            <MenuItem value={\"not signed\"}>未簽核</MenuItem>\n            <MenuItem value={\"signed\"}>已簽核</MenuItem>\n          </Select>\n        </FormControl>\n        </Grid>\n\n        <br></br>\n        <br></br>\n\n        <div>\n          {this.state.data ?\n            <ReactTable\n              data={this.state.data}\n              getTrProps={(state, rowInfo, column, instance) => ({\n                onClick: e => alert(\n              `開始日期：${rowInfo.row.startDate}\\n結束日期：${rowInfo.row.endDate}\\n假勤類別：${rowInfo.row.leaveType}\\n代理人：${rowInfo.row.substitute}\\n簽核狀態：${rowInfo.row.status}\\n拒絕原因：${rowInfo.row.rejectReason}`)\n              })}\n              columns={columns}\n              defaultPageSize = {10}\n              pageSizeOptions = {[10, 15]}\n            /> :\n            <ReactTable\n              LoadingComponent={MyLoader}\n              data={leaves}\n              columns={columns}\n              defaultPageSize = {10}\n              pageSizeOptions = {[10, 15]}\n            />\n          }\n        </div>\n        </Grid> \n      </div>    \n    );\n  }\n}\n\n"]},"metadata":{},"sourceType":"module"}