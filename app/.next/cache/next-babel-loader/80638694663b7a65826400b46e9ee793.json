{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _taggedTemplateLiteral from \"@babel/runtime-corejs2/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/yan/ezbot-web/app/pages/reject_sub.js\";\nvar __jsx = React.createElement;\n\nfunction _templateObject8() {\n  var data = _taggedTemplateLiteral([\"\\n  color: tomato;\\n  border-color: tomato;\\n  width: 80%;\\n\"]);\n\n  _templateObject8 = function _templateObject8() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject7() {\n  var data = _taggedTemplateLiteral([\"\\n  width: 80%;\\n  variant: contained;\\n\"]);\n\n  _templateObject7 = function _templateObject7() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\n  width: 80%;\\n  margin: auto;\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\n  text-align: center;\\n  padding-top: 2em;\\n  padding-bottom: 2em;\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n  background: #F7F9FA;\\n  height: auto;\\n  width: 90%;\\n  margin: 5em auto;\\n  box-shadow: 5px 5px 5px 0px rgba(0, 0, 0, 0.4);\\n\\n  label {\\n    font-family: Candara;\\n    color: #1C2833;\\n    font-size: 1.2em;\\n    font-weight: 400;\\n  }\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  color: #F8F9F9;\\n  font-family: Candara;\\n  text-align: center;\\n  margin-bottom:-2em;\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\nwidth: 50%;\\nmargin: 0 auto;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  margin: 5.5em auto;\\n  \\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\n// Render Prop\nimport React, { Component } from 'react';\nimport styled from 'styled-components';\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport { TextField } from 'formik-material-ui';\nimport fetch from 'isomorphic-unfetch';\nimport Button from \"@material-ui/core/Button\";\nimport Box from \"@material-ui/core/Box\";\nimport Head from 'next/head';\nimport window from 'global';\nimport { Select } from 'material-ui-formik-components/Select';\nimport { DatePicker, MuiPickersUtilsProvider } from '@material-ui/pickers';\nimport LuxonUtils from '@date-io/luxon';\nimport Loader from 'react-loader-spinner';\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\n\nrequire(\"react-datepicker/dist/react-datepicker.css\");\n\nvar dateFormat = require('dateformat');\n\nvar liff = window.liff;\nvar BOX = styled.div(_templateObject());\nvar LOADERBOX = styled.div(_templateObject2());\nvar TITLE = styled.h2(_templateObject3());\nvar CONTAINER = styled.div(_templateObject4());\nvar MYFORM = styled(Form)(_templateObject5());\nvar FIELD = styled(Field)(_templateObject6());\nvar BUTTON = styled(Button)(_templateObject7());\nvar TomatoButton = styled.button(_templateObject8());\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n    _this.state = {\n      userId: null,\n      Authorization: null,\n      ubn: null,\n      leaveId: null,\n      leave: null,\n      status: null\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      //this.getQuery();\n      this.liffInit();\n    }\n  }, {\n    key: \"getQuery\",\n    value: function getQuery() {\n      var urlParams = new URLSearchParams(window.location.search);\n      urlParams = urlParams.toString().split(\"&\");\n      var ubn = urlParams[0].split(\"=\")[1];\n      var leaveId = urlParams[1].split(\"=\")[1];\n      this.setState({\n        leaveId: leaveId\n      });\n    }\n  }, {\n    key: \"getStaff\",\n    value: function getStaff(Authorization, ubn, email) {\n      var _this2 = this;\n\n      try {\n        var URL_GETSTAFF = \"https://us-central1-teddybear-dev.cloudfunctions.net/api/staff/target?ubn=\".concat(ubn, \"&email=\").concat(email);\n        fetch(URL_GETSTAFF, {\n          method: 'get',\n          headers: {\n            \"Authorization\": Authorization\n          }\n        }).then(function (res) {\n          if (res.ok) {\n            return res.json();\n          }\n\n          throw new Error('getStaff response was not ok.');\n        }).then(function (result) {\n          var substituteInfo = JSON.parse(result.substitute);\n          var messages_self = [{\n            \"type\": \"flex\",\n            \"altText\": \"代理人已拒絕假單\",\n            \"contents\": {\n              \"type\": \"bubble\",\n              \"styles\": {},\n              \"body\": {\n                \"type\": \"box\",\n                \"layout\": \"vertical\",\n                \"contents\": [{\n                  \"type\": \"text\",\n                  \"text\": \"代理人\",\n                  \"weight\": \"bold\",\n                  \"color\": \"#1DB446\",\n                  \"size\": \"sm\"\n                }, {\n                  \"type\": \"text\",\n                  \"text\": \"已拒絕假單\",\n                  \"weight\": \"bold\",\n                  \"size\": \"xxl\",\n                  \"margin\": \"md\"\n                }, {\n                  \"type\": \"separator\",\n                  \"margin\": \"xxl\"\n                }, {\n                  \"type\": \"box\",\n                  \"layout\": \"vertical\",\n                  \"margin\": \"xxl\",\n                  \"spacing\": \"sm\",\n                  \"contents\": [{\n                    \"type\": \"box\",\n                    \"layout\": \"horizontal\",\n                    \"contents\": [{\n                      \"type\": \"text\",\n                      \"text\": \"開始日期\",\n                      \"size\": \"sm\",\n                      \"color\": \"#555555\"\n                    }, {\n                      \"type\": \"text\",\n                      \"text\": _this2.state.leave.startDate,\n                      \"size\": \"sm\",\n                      \"color\": \"#111111\",\n                      \"align\": \"end\"\n                    }]\n                  }, {\n                    \"type\": \"box\",\n                    \"layout\": \"horizontal\",\n                    \"contents\": [{\n                      \"type\": \"text\",\n                      \"text\": \"結束日期\",\n                      \"size\": \"sm\",\n                      \"color\": \"#555555\"\n                    }, {\n                      \"type\": \"text\",\n                      \"text\": _this2.state.leave.endDate,\n                      \"size\": \"sm\",\n                      \"color\": \"#111111\",\n                      \"align\": \"end\"\n                    }]\n                  }, {\n                    \"type\": \"separator\",\n                    \"margin\": \"xxl\"\n                  }, {\n                    \"type\": \"box\",\n                    \"layout\": \"horizontal\",\n                    \"margin\": \"xxl\",\n                    \"contents\": [{\n                      \"type\": \"text\",\n                      \"text\": \"假別\",\n                      \"size\": \"sm\",\n                      \"color\": \"#555555\"\n                    }, {\n                      \"type\": \"text\",\n                      \"text\": _this2.state.leave.leaveType,\n                      \"size\": \"sm\",\n                      \"color\": \"#111111\",\n                      \"align\": \"end\"\n                    }]\n                  }, {\n                    \"type\": \"box\",\n                    \"layout\": \"horizontal\",\n                    \"contents\": [{\n                      \"type\": \"text\",\n                      \"text\": \"請假原因\",\n                      \"size\": \"sm\",\n                      \"color\": \"#555555\"\n                    }, {\n                      \"type\": \"text\",\n                      \"text\": _this2.state.leave.leaveReason,\n                      \"size\": \"sm\",\n                      \"color\": \"#111111\",\n                      \"align\": \"end\"\n                    }]\n                  }, {\n                    \"type\": \"box\",\n                    \"layout\": \"horizontal\",\n                    \"contents\": [{\n                      \"type\": \"text\",\n                      \"text\": \"代理人\",\n                      \"size\": \"sm\",\n                      \"color\": \"#555555\"\n                    }, {\n                      \"type\": \"text\",\n                      \"text\": substituteInfo.name,\n                      \"size\": \"sm\",\n                      \"color\": \"#111111\",\n                      \"align\": \"end\"\n                    }]\n                  }]\n                }, {\n                  \"type\": \"separator\",\n                  \"margin\": \"xxl\"\n                }, {\n                  \"type\": \"box\",\n                  \"layout\": \"horizontal\",\n                  \"margin\": \"md\",\n                  \"contents\": [{\n                    \"type\": \"text\",\n                    \"text\": \"簽核狀態\",\n                    \"size\": \"xs\",\n                    \"color\": \"#555555\"\n                  }, {\n                    \"type\": \"text\",\n                    \"text\": \"拒絕(代理人)\",\n                    \"color\": \"#ff0000\",\n                    \"size\": \"xs\",\n                    \"align\": \"end\"\n                  }]\n                }, {\n                  \"type\": \"box\",\n                  \"layout\": \"horizontal\",\n                  \"margin\": \"md\",\n                  \"contents\": [{\n                    \"type\": \"text\",\n                    \"text\": \"拒絕原因\",\n                    \"size\": \"xs\",\n                    \"color\": \"#555555\"\n                  }, {\n                    \"type\": \"text\",\n                    \"text\": _this2.state.leave.rejectReason,\n                    \"color\": \"#111111\",\n                    \"size\": \"xs\",\n                    \"align\": \"end\"\n                  }]\n                }]\n              }\n            }\n          }];\n\n          _this2.pushMessage(result.userId, messages_self);\n\n          liff.closeWindow();\n        })[\"catch\"](function (error) {\n          alert(error.message);\n        });\n      } catch (err) {\n        next(err);\n      }\n    }\n  }, {\n    key: \"liffInit\",\n    value: function liffInit() {\n      var _this3 = this;\n\n      try {\n        liff.init(function (data) {\n          var userId = data.context.userId;\n          var accessToken = liff.getAccessToken();\n          var URL_CHECKEXIST = \"https://us-central1-teddybear-dev.cloudfunctions.net/api/staff/checkExist\";\n          var body = {\n            userId: userId\n          };\n          fetch(URL_CHECKEXIST, {\n            method: 'post',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: _JSON$stringify(body)\n          }).then(function (res) {\n            return res.text();\n          }).then(function (result) {\n            if (result) {\n              _this3.setState({\n                userId: userId\n              });\n\n              _this3.lineAuth(userId, accessToken);\n            } else {\n              alert(\"請登入以查看假單\");\n              window.location.replace(\"https://teddybear-dev.firebaseapp.com/signIn\");\n            }\n          });\n        }, function (err) {\n          alert(err.message);\n        });\n      } catch (err) {\n        next(err);\n      }\n    }\n  }, {\n    key: \"lineAuth\",\n    value: function lineAuth(userId, accessToken) {\n      var _this4 = this;\n\n      try {\n        var url = \"https://us-central1-teddybear-dev.cloudfunctions.net/api/staff/lineAuth\";\n        var body = {\n          userId: userId,\n          accessToken: accessToken\n        };\n        fetch(url, {\n          method: 'post',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: _JSON$stringify(body)\n        }).then(function (res) {\n          return res.json();\n        }).then(function (result) {\n          if (result) {\n            var ubn = result.staff.ubn; //const department = result.staff.department;\n            //const email = result.staff.email;\n\n            var idToken = result.token.idToken;\n\n            _this4.setState({\n              Authorization: idToken,\n              ubn: ubn\n            });\n\n            _this4.checkStatus(idToken, ubn, _this4.state.leaveId);\n          } else {\n            alert(\"lineAuth no result\");\n          }\n        })[\"catch\"](function (error) {\n          alert(error.message);\n        });\n      } catch (err) {\n        next(err);\n      }\n    }\n  }, {\n    key: \"checkStatus\",\n    value: function checkStatus(Authorization, ubn, id) {\n      var _this5 = this;\n\n      try {\n        var URL_GETLEAVE = \"https://us-central1-teddybear-dev.cloudfunctions.net/api/leave/target?ubn=\".concat(ubn, \"&id=\").concat(id);\n        fetch(URL_GETLEAVE, {\n          method: 'get',\n          headers: {\n            Authorization: Authorization\n          }\n        }).then(function (res) {\n          if (res.ok) {\n            return res.json();\n          }\n\n          throw new Error('checkStatus response was not ok.');\n        }).then(function (result) {\n          if (result.status != \"等待簽核\") {\n            //alert(\"此張假單已簽核\");\n            _this5.setState({\n              status: \"signed\"\n            });\n\n            window.location.replace(\"https://teddybear-dev.firebaseapp.com/alreadyApproved/\");\n          } else {\n            _this5.setState({\n              status: \"not signed\"\n            });\n          }\n        })[\"catch\"](function (error) {\n          alert(error.message);\n        });\n      } catch (err) {\n        next(err);\n      }\n    }\n  }, {\n    key: \"updateLeave\",\n    value: function updateLeave(values) {\n      var _this6 = this;\n\n      try {\n        var URL_UPDATELEAVE = \"https://us-central1-teddybear-dev.cloudfunctions.net/api/leave/update\";\n        fetch(URL_UPDATELEAVE, {\n          method: 'post',\n          headers: {\n            \"Authorization\": this.state.Authorization,\n            \"Content-Type\": \"application/json\"\n          },\n          body: _JSON$stringify(values)\n        }).then(function (res) {\n          if (res.ok) {\n            return res.json();\n          }\n\n          throw new Error('updateLeave response was not ok.');\n        }).then(function (result) {\n          _this6.setState({\n            leave: result\n          });\n\n          var messages = [{\n            type: \"text\",\n            text: \"拒絕成功\"\n          }];\n\n          _this6.pushMessage(_this6.state.userId, messages);\n\n          var substituteInfo = JSON.parse(result.substitute);\n          var messages_self = {\n            \"type\": \"flex\",\n            \"altText\": \"代理人已拒絕假單\",\n            \"contents\": {\n              \"type\": \"bubble\",\n              \"styles\": {},\n              \"body\": {\n                \"type\": \"box\",\n                \"layout\": \"vertical\",\n                \"contents\": [{\n                  \"type\": \"text\",\n                  \"text\": \"代理人\",\n                  \"weight\": \"bold\",\n                  \"color\": \"#1DB446\",\n                  \"size\": \"sm\"\n                }, {\n                  \"type\": \"text\",\n                  \"text\": \"已拒絕假單\",\n                  \"weight\": \"bold\",\n                  \"size\": \"xxl\",\n                  \"margin\": \"md\"\n                }, {\n                  \"type\": \"separator\",\n                  \"margin\": \"xxl\"\n                }, {\n                  \"type\": \"box\",\n                  \"layout\": \"vertical\",\n                  \"margin\": \"xxl\",\n                  \"spacing\": \"sm\",\n                  \"contents\": [{\n                    \"type\": \"box\",\n                    \"layout\": \"horizontal\",\n                    \"contents\": [{\n                      \"type\": \"text\",\n                      \"text\": \"開始日期\",\n                      \"size\": \"sm\",\n                      \"color\": \"#555555\"\n                    }, {\n                      \"type\": \"text\",\n                      \"text\": result.startDate,\n                      \"size\": \"sm\",\n                      \"color\": \"#111111\",\n                      \"align\": \"end\"\n                    }]\n                  }, {\n                    \"type\": \"box\",\n                    \"layout\": \"horizontal\",\n                    \"contents\": [{\n                      \"type\": \"text\",\n                      \"text\": \"結束日期\",\n                      \"size\": \"sm\",\n                      \"color\": \"#555555\"\n                    }, {\n                      \"type\": \"text\",\n                      \"text\": result.endDate,\n                      \"size\": \"sm\",\n                      \"color\": \"#111111\",\n                      \"align\": \"end\"\n                    }]\n                  }, {\n                    \"type\": \"separator\",\n                    \"margin\": \"xxl\"\n                  }, {\n                    \"type\": \"box\",\n                    \"layout\": \"horizontal\",\n                    \"margin\": \"xxl\",\n                    \"contents\": [{\n                      \"type\": \"text\",\n                      \"text\": \"假別\",\n                      \"size\": \"sm\",\n                      \"color\": \"#555555\"\n                    }, {\n                      \"type\": \"text\",\n                      \"text\": result.leaveType,\n                      \"size\": \"sm\",\n                      \"color\": \"#111111\",\n                      \"align\": \"end\"\n                    }]\n                  }, {\n                    \"type\": \"box\",\n                    \"layout\": \"horizontal\",\n                    \"contents\": [{\n                      \"type\": \"text\",\n                      \"text\": \"請假原因\",\n                      \"size\": \"sm\",\n                      \"color\": \"#555555\"\n                    }, {\n                      \"type\": \"text\",\n                      \"text\": result.leaveReason,\n                      \"size\": \"sm\",\n                      \"color\": \"#111111\",\n                      \"align\": \"end\"\n                    }]\n                  }, {\n                    \"type\": \"box\",\n                    \"layout\": \"horizontal\",\n                    \"contents\": [{\n                      \"type\": \"text\",\n                      \"text\": \"代理人\",\n                      \"size\": \"sm\",\n                      \"color\": \"#555555\"\n                    }, {\n                      \"type\": \"text\",\n                      \"text\": substituteInfo.name,\n                      \"size\": \"sm\",\n                      \"color\": \"#111111\",\n                      \"align\": \"end\"\n                    }]\n                  }]\n                }, {\n                  \"type\": \"separator\",\n                  \"margin\": \"xxl\"\n                }, {\n                  \"type\": \"box\",\n                  \"layout\": \"horizontal\",\n                  \"margin\": \"md\",\n                  \"contents\": [{\n                    \"type\": \"text\",\n                    \"text\": \"簽核狀態\",\n                    \"size\": \"xs\",\n                    \"color\": \"#555555\"\n                  }, {\n                    \"type\": \"text\",\n                    \"text\": \"拒絕(代理人)\",\n                    \"color\": \"#ff0000\",\n                    \"size\": \"xs\",\n                    \"align\": \"end\"\n                  }]\n                }, {\n                  \"type\": \"box\",\n                  \"layout\": \"horizontal\",\n                  \"margin\": \"md\",\n                  \"contents\": [{\n                    \"type\": \"text\",\n                    \"text\": \"拒絕原因\",\n                    \"size\": \"xs\",\n                    \"color\": \"#555555\"\n                  }, {\n                    \"type\": \"text\",\n                    \"text\": result.rejectReason,\n                    \"color\": \"#111111\",\n                    \"size\": \"xs\",\n                    \"align\": \"end\"\n                  }]\n                }]\n              }\n            }\n          };\n\n          _this6.pushMessage(_this6.state.userId, [messages_self]);\n\n          liff.closeWindow();\n        })[\"catch\"](function (error) {\n          alert(error.message);\n        });\n      } catch (err) {\n        next(err);\n      }\n    }\n  }, {\n    key: \"pushMessage\",\n    value: function pushMessage(userId, messages) {\n      try {\n        var URL_PUSHMESSAGE = \"https://us-central1-teddybear-dev.cloudfunctions.net/api/message/pushMessage\";\n        var body = {\n          userId: userId,\n          messages: messages\n        };\n        fetch(URL_PUSHMESSAGE, {\n          method: 'post',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: _JSON$stringify(body)\n        }).then(function (res) {\n          if (res.ok) {\n            return res.json();\n          }\n\n          throw new Error('pushMessage response was not ok.');\n        }).then(function (result) {//liff.closeWindow();\n        })[\"catch\"](function (error) {\n          alert(error.message);\n        });\n      } catch (err) {\n        next(err);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this7 = this;\n\n      return __jsx(BOX, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 671\n        },\n        __self: this\n      }, __jsx(Head, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 672\n        },\n        __self: this\n      }, __jsx(\"script\", {\n        src: \"https://d.line-scdn.net/liff/1.0/sdk.js\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 673\n        },\n        __self: this\n      })), __jsx(\"body\", {\n        style: {\n          background: '#34495E'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 675\n        },\n        __self: this\n      }, __jsx(BOX, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 676\n        },\n        __self: this\n      }, __jsx(Formik, {\n        initialValues: {\n          rejectReason: ''\n        },\n        validate: function validate(values) {\n          var errors = {}; // check for rejectReason\n\n          if (!values.rejectReason) {\n            errors.rejectReason = 'Required';\n          }\n\n          return errors;\n        },\n        onSubmit: function onSubmit(values, _ref) {\n          var setSubmitting = _ref.setSubmitting;\n          values.status = \"拒絕 (代理人)\";\n          values.leaveId = _this7.state.leaveId;\n          values.ubn = _this7.state.ubn;\n\n          _this7.updateLeave(values);\n\n          setSubmitting(false); //console.log('submitting', values);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 677\n        },\n        __self: this\n      }, function (_ref2) {\n        var isSubmitting = _ref2.isSubmitting,\n            values = _ref2.values,\n            setFieldValue = _ref2.setFieldValue;\n        return __jsx(CONTAINER, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 697\n          },\n          __self: this\n        }, _this7.state.userId && _this7.state.Authorization && _this7.state.ubn && _this7.state.leaveId && _this7.state.status ? __jsx(MYFORM, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 699\n          },\n          __self: this\n        }, __jsx(FIELD, {\n          type: \"rejectReason\",\n          name: \"rejectReason\",\n          label: \"\\u62D2\\u7D55\\u539F\\u56E0\",\n          component: TextField,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 700\n          },\n          __self: this\n        }), __jsx(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 707\n          },\n          __self: this\n        }), __jsx(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 708\n          },\n          __self: this\n        }), __jsx(BUTTON, {\n          type: \"submit\",\n          fontFamily: \"Candara\",\n          variant: \"contained\",\n          color: \"secondary\",\n          disabled: isSubmitting,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 710\n          },\n          __self: this\n        }, \"\\u9001\\u51FA\")) : __jsx(LOADERBOX, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 721\n          },\n          __self: this\n        }, __jsx(Loader, {\n          type: \"BallTriangle\",\n          color: \"#00BFFF\",\n          height: 80,\n          width: 80,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 722\n          },\n          __self: this\n        })));\n      }))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport { App as default };","map":{"version":3,"sources":["/Users/yan/ezbot-web/app/pages/reject_sub.js"],"names":["React","Component","styled","Formik","Form","Field","ErrorMessage","TextField","fetch","Button","Box","Head","window","Select","DatePicker","MuiPickersUtilsProvider","LuxonUtils","Loader","require","dateFormat","liff","BOX","div","LOADERBOX","TITLE","h2","CONTAINER","MYFORM","FIELD","BUTTON","TomatoButton","button","App","props","state","userId","Authorization","ubn","leaveId","leave","status","liffInit","urlParams","URLSearchParams","location","search","toString","split","setState","email","URL_GETSTAFF","method","headers","then","res","ok","json","Error","result","substituteInfo","JSON","parse","substitute","messages_self","startDate","endDate","leaveType","leaveReason","name","rejectReason","pushMessage","closeWindow","error","alert","message","err","next","init","data","context","accessToken","getAccessToken","URL_CHECKEXIST","body","text","lineAuth","replace","url","staff","idToken","token","checkStatus","id","URL_GETLEAVE","values","URL_UPDATELEAVE","messages","type","URL_PUSHMESSAGE","background","errors","setSubmitting","updateLeave","isSubmitting","setFieldValue"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAASC,MAAT,EAAiBC,IAAjB,EAAuBC,KAAvB,EAA8BC,YAA9B,QAAkD,QAAlD;AACA,SAASC,SAAT,QAA0B,oBAA1B;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,GAAP,MAAgB,uBAAhB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,SAASC,MAAT,QAAuB,sCAAvB;AACA,SACEC,UADF,EAEEC,uBAFF,QAGO,sBAHP;AAIA,OAAOC,UAAP,MAAuB,gBAAvB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAO,+DAAP;;AACAC,OAAO,CAAE,4CAAF,CAAP;;AACA,IAAIC,UAAU,GAAGD,OAAO,CAAC,YAAD,CAAxB;;AAEA,IAAME,IAAI,GAAGR,MAAM,CAACQ,IAApB;AACA,IAAMC,GAAG,GAAGnB,MAAM,CAACoB,GAAV,mBAAT;AAIA,IAAMC,SAAS,GAAGrB,MAAM,CAACoB,GAAV,oBAAf;AAIA,IAAME,KAAK,GAAGtB,MAAM,CAACuB,EAAV,oBAAX;AAMA,IAAMC,SAAS,GAAGxB,MAAM,CAACoB,GAAV,oBAAf;AAcA,IAAMK,MAAM,GAAGzB,MAAM,CAACE,IAAD,CAAT,oBAAZ;AAKA,IAAMwB,KAAK,GAAG1B,MAAM,CAACG,KAAD,CAAT,oBAAX;AAIA,IAAMwB,MAAM,GAAG3B,MAAM,CAACO,MAAD,CAAT,oBAAZ;AAIA,IAAMqB,YAAY,GAAG5B,MAAM,CAAC6B,MAAV,oBAAlB;;IAOqBC,G;;;;;AACjB,eAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,6EAAMA,KAAN;AAEA,UAAKC,KAAL,GAAa;AACXC,MAAAA,MAAM,EAAG,IADE;AAEXC,MAAAA,aAAa,EAAE,IAFJ;AAGXC,MAAAA,GAAG,EAAE,IAHM;AAIXC,MAAAA,OAAO,EAAE,IAJE;AAKXC,MAAAA,KAAK,EAAE,IALI;AAMXC,MAAAA,MAAM,EAAE;AANG,KAAb;AAHiB;AAWlB;;;;wCAEmB;AAClB;AACA,WAAKC,QAAL;AACD;;;+BAEU;AACP,UAAIC,SAAS,GAAG,IAAIC,eAAJ,CAAoB/B,MAAM,CAACgC,QAAP,CAAgBC,MAApC,CAAhB;AACAH,MAAAA,SAAS,GAAGA,SAAS,CAACI,QAAV,GAAqBC,KAArB,CAA2B,GAA3B,CAAZ;AACA,UAAMV,GAAG,GAAGK,SAAS,CAAC,CAAD,CAAT,CAAaK,KAAb,CAAmB,GAAnB,EAAwB,CAAxB,CAAZ;AACA,UAAMT,OAAO,GAAGI,SAAS,CAAC,CAAD,CAAT,CAAaK,KAAb,CAAmB,GAAnB,EAAwB,CAAxB,CAAhB;AACA,WAAKC,QAAL,CAAc;AACVV,QAAAA,OAAO,EAAEA;AADC,OAAd;AAGH;;;6BAESF,a,EAAeC,G,EAAKY,K,EAAO;AAAA;;AACjC,UAAI;AACF,YAAMC,YAAY,uFAAgFb,GAAhF,oBAA6FY,KAA7F,CAAlB;AACAzC,QAAAA,KAAK,CAAC0C,YAAD,EAAe;AAClBC,UAAAA,MAAM,EAAE,KADU;AAElBC,UAAAA,OAAO,EAAE;AACL,6BAAiBhB;AADZ;AAFS,SAAf,CAAL,CAKGiB,IALH,CAKQ,UAACC,GAAD,EAAS;AACf,cAAGA,GAAG,CAACC,EAAP,EAAW;AACP,mBAAOD,GAAG,CAACE,IAAJ,EAAP;AACH;;AACD,gBAAM,IAAIC,KAAJ,CAAU,+BAAV,CAAN;AACD,SAVD,EAUGJ,IAVH,CAUQ,UAAAK,MAAM,EAAI;AAChB,cAAMC,cAAc,GAAGC,IAAI,CAACC,KAAL,CAAWH,MAAM,CAACI,UAAlB,CAAvB;AACA,cAAMC,aAAa,GAAG,CAAC;AACnB,oBAAQ,MADW;AAEnB,uBAAW,UAFQ;AAGnB,wBAAY;AACR,sBAAQ,QADA;AAER,wBAAU,EAFF;AAKR,sBAAQ;AACR,wBAAQ,KADA;AAER,0BAAU,UAFF;AAGR,4BAAY,CACR;AACA,0BAAQ,MADR;AAEA,0BAAQ,KAFR;AAGA,4BAAU,MAHV;AAIA,2BAAS,SAJT;AAKA,0BAAQ;AALR,iBADQ,EAQR;AACA,0BAAQ,MADR;AAEA,0BAAQ,OAFR;AAGA,4BAAU,MAHV;AAIA,0BAAQ,KAJR;AAKA,4BAAU;AALV,iBARQ,EAeR;AACA,0BAAQ,WADR;AAEA,4BAAU;AAFV,iBAfQ,EAmBR;AACA,0BAAQ,KADR;AAEA,4BAAU,UAFV;AAGA,4BAAU,KAHV;AAIA,6BAAW,IAJX;AAKA,8BAAY,CACR;AACA,4BAAQ,KADR;AAEA,8BAAU,YAFV;AAGA,gCAAY,CACR;AACA,8BAAQ,MADR;AAEA,8BAAQ,MAFR;AAGA,8BAAQ,IAHR;AAIA,+BAAS;AAJT,qBADQ,EAOR;AACA,8BAAQ,MADR;AAEA,8BAAQ,MAAI,CAAC7B,KAAL,CAAWK,KAAX,CAAiByB,SAFzB;AAGA,8BAAQ,IAHR;AAIA,+BAAS,SAJT;AAKA,+BAAS;AALT,qBAPQ;AAHZ,mBADQ,EAoBR;AACA,4BAAQ,KADR;AAEA,8BAAU,YAFV;AAGA,gCAAY,CACR;AACA,8BAAQ,MADR;AAEA,8BAAQ,MAFR;AAGA,8BAAQ,IAHR;AAIA,+BAAS;AAJT,qBADQ,EAOR;AACA,8BAAQ,MADR;AAEA,8BAAQ,MAAI,CAAC9B,KAAL,CAAWK,KAAX,CAAiB0B,OAFzB;AAGA,8BAAQ,IAHR;AAIA,+BAAS,SAJT;AAKA,+BAAS;AALT,qBAPQ;AAHZ,mBApBQ,EAuCR;AACA,4BAAQ,WADR;AAEA,8BAAU;AAFV,mBAvCQ,EA2CR;AACA,4BAAQ,KADR;AAEA,8BAAU,YAFV;AAGA,8BAAU,KAHV;AAIA,gCAAY,CACR;AACA,8BAAQ,MADR;AAEA,8BAAQ,IAFR;AAGA,8BAAQ,IAHR;AAIA,+BAAS;AAJT,qBADQ,EAOR;AACA,8BAAQ,MADR;AAEA,8BAAQ,MAAI,CAAC/B,KAAL,CAAWK,KAAX,CAAiB2B,SAFzB;AAGA,8BAAQ,IAHR;AAIA,+BAAS,SAJT;AAKA,+BAAS;AALT,qBAPQ;AAJZ,mBA3CQ,EA+DR;AACA,4BAAQ,KADR;AAEA,8BAAU,YAFV;AAGA,gCAAY,CACR;AACA,8BAAQ,MADR;AAEA,8BAAQ,MAFR;AAGA,8BAAQ,IAHR;AAIA,+BAAS;AAJT,qBADQ,EAOR;AACA,8BAAQ,MADR;AAEA,8BAAQ,MAAI,CAAChC,KAAL,CAAWK,KAAX,CAAiB4B,WAFzB;AAGA,8BAAQ,IAHR;AAIA,+BAAS,SAJT;AAKA,+BAAS;AALT,qBAPQ;AAHZ,mBA/DQ,EAkFR;AACA,4BAAQ,KADR;AAEA,8BAAU,YAFV;AAGA,gCAAY,CACR;AACA,8BAAQ,MADR;AAEA,8BAAQ,KAFR;AAGA,8BAAQ,IAHR;AAIA,+BAAS;AAJT,qBADQ,EAOR;AACA,8BAAQ,MADR;AAEA,8BAAQR,cAAc,CAACS,IAFvB;AAGA,8BAAQ,IAHR;AAIA,+BAAS,SAJT;AAKA,+BAAS;AALT,qBAPQ;AAHZ,mBAlFQ;AALZ,iBAnBQ,EA+HR;AACA,0BAAQ,WADR;AAEA,4BAAU;AAFV,iBA/HQ,EAmIR;AACA,0BAAQ,KADR;AAEA,4BAAU,YAFV;AAGA,4BAAU,IAHV;AAIA,8BAAY,CACR;AACA,4BAAQ,MADR;AAEA,4BAAQ,MAFR;AAGA,4BAAQ,IAHR;AAIA,6BAAS;AAJT,mBADQ,EAOR;AACA,4BAAQ,MADR;AAEA,4BAAQ,SAFR;AAGA,6BAAS,SAHT;AAIA,4BAAQ,IAJR;AAKA,6BAAS;AALT,mBAPQ;AAJZ,iBAnIQ,EAuJR;AACA,0BAAQ,KADR;AAEA,4BAAU,YAFV;AAGA,4BAAU,IAHV;AAIA,8BAAY,CACR;AACA,4BAAQ,MADR;AAEA,4BAAQ,MAFR;AAGA,4BAAQ,IAHR;AAIA,6BAAS;AAJT,mBADQ,EAOR;AACA,4BAAQ,MADR;AAEA,4BAAQ,MAAI,CAAClC,KAAL,CAAWK,KAAX,CAAiB8B,YAFzB;AAGA,6BAAS,SAHT;AAIA,4BAAQ,IAJR;AAKA,6BAAS;AALT,mBAPQ;AAJZ,iBAvJQ;AAHJ;AALA;AAHO,WAAD,CAAtB;;AA0LA,UAAA,MAAI,CAACC,WAAL,CAAiBZ,MAAM,CAACvB,MAAxB,EAAgC4B,aAAhC;;AACA3C,UAAAA,IAAI,CAACmD,WAAL;AACD,SAxMD,WAwMS,UAAUC,KAAV,EAAiB;AACpBC,UAAAA,KAAK,CAACD,KAAK,CAACE,OAAP,CAAL;AACL,SA1MD;AA2MD,OA7MD,CA6ME,OAAOC,GAAP,EAAY;AACZC,QAAAA,IAAI,CAACD,GAAD,CAAJ;AACD;AACF;;;+BAGQ;AAAA;;AACT,UAAI;AACFvD,QAAAA,IAAI,CAACyD,IAAL,CAAU,UAAAC,IAAI,EAAI;AACd,cAAM3C,MAAM,GAAG2C,IAAI,CAACC,OAAL,CAAa5C,MAA5B;AACA,cAAM6C,WAAW,GAAG5D,IAAI,CAAC6D,cAAL,EAApB;AACA,cAAMC,cAAc,GAAG,2EAAvB;AACA,cAAMC,IAAI,GAAG;AACThD,YAAAA,MAAM,EAAEA;AADC,WAAb;AAGA3B,UAAAA,KAAK,CAAC0E,cAAD,EAAiB;AAClB/B,YAAAA,MAAM,EAAE,MADU;AAElBC,YAAAA,OAAO,EAAE;AACT,8BAAgB;AADP,aAFS;AAKlB+B,YAAAA,IAAI,EAAE,gBAAeA,IAAf;AALY,WAAjB,CAAL,CAMG9B,IANH,CAMQ,UAACC,GAAD,EAAS;AACb,mBAAOA,GAAG,CAAC8B,IAAJ,EAAP;AACH,WARD,EAQG/B,IARH,CAQQ,UAAAK,MAAM,EAAI;AACd,gBAAIA,MAAJ,EAAY;AACR,cAAA,MAAI,CAACV,QAAL,CAAc;AACVb,gBAAAA,MAAM,EAAEA;AADE,eAAd;;AAGA,cAAA,MAAI,CAACkD,QAAL,CAAclD,MAAd,EAAsB6C,WAAtB;AACH,aALD,MAKO;AACHP,cAAAA,KAAK,CAAC,UAAD,CAAL;AACA7D,cAAAA,MAAM,CAACgC,QAAP,CAAgB0C,OAAhB,CAAwB,8CAAxB;AACH;AACJ,WAlBD;AAmBH,SA1BD,EA0BG,UAAAX,GAAG,EAAI;AACNF,UAAAA,KAAK,CAACE,GAAG,CAACD,OAAL,CAAL;AACH,SA5BD;AA6BD,OA9BD,CA8BE,OAAOC,GAAP,EAAY;AACRC,QAAAA,IAAI,CAACD,GAAD,CAAJ;AACL;AACF;;;6BAESxC,M,EAAQ6C,W,EAAc;AAAA;;AAC9B,UAAI;AACF,YAAMO,GAAG,GAAG,yEAAZ;AACA,YAAMJ,IAAI,GAAG;AACThD,UAAAA,MAAM,EAAEA,MADC;AAET6C,UAAAA,WAAW,EAAEA;AAFJ,SAAb;AAIAxE,QAAAA,KAAK,CAAC+E,GAAD,EAAM;AACPpC,UAAAA,MAAM,EAAE,MADD;AAEPC,UAAAA,OAAO,EAAE;AACL,4BAAgB;AADX,WAFF;AAKP+B,UAAAA,IAAI,EAAE,gBAAeA,IAAf;AALC,SAAN,CAAL,CAMG9B,IANH,CAMQ,UAACC,GAAD,EAAS;AACb,iBAAOA,GAAG,CAACE,IAAJ,EAAP;AACH,SARD,EAQGH,IARH,CAQQ,UAAAK,MAAM,EAAI;AACd,cAAIA,MAAJ,EAAY;AACR,gBAAMrB,GAAG,GAAGqB,MAAM,CAAC8B,KAAP,CAAanD,GAAzB,CADQ,CAER;AACA;;AACA,gBAAMoD,OAAO,GAAG/B,MAAM,CAACgC,KAAP,CAAaD,OAA7B;;AACA,YAAA,MAAI,CAACzC,QAAL,CAAc;AACVZ,cAAAA,aAAa,EAAEqD,OADL;AAEVpD,cAAAA,GAAG,EAAEA;AAFK,aAAd;;AAIA,YAAA,MAAI,CAACsD,WAAL,CAAiBF,OAAjB,EAA0BpD,GAA1B,EAA+B,MAAI,CAACH,KAAL,CAAWI,OAA1C;AACH,WAVD,MAUO;AACHmC,YAAAA,KAAK,CAAC,oBAAD,CAAL;AACH;AACJ,SAtBD,WAsBS,UAAUD,KAAV,EAAiB;AACtBC,UAAAA,KAAK,CAACD,KAAK,CAACE,OAAP,CAAL;AACH,SAxBD;AAyBD,OA/BD,CA+BE,OAAOC,GAAP,EAAY;AACRC,QAAAA,IAAI,CAACD,GAAD,CAAJ;AACL;AACF;;;gCAEYvC,a,EAAeC,G,EAAKuD,E,EAAI;AAAA;;AACjC,UAAI;AACA,YAAMC,YAAY,uFAAgFxD,GAAhF,iBAA0FuD,EAA1F,CAAlB;AACApF,QAAAA,KAAK,CAACqF,YAAD,EAAe;AAChB1C,UAAAA,MAAM,EAAE,KADQ;AAEhBC,UAAAA,OAAO,EAAE;AACLhB,YAAAA,aAAa,EAAEA;AADV;AAFO,SAAf,CAAL,CAKGiB,IALH,CAKQ,UAACC,GAAD,EAAS;AACb,cAAGA,GAAG,CAACC,EAAP,EAAW;AACX,mBAAOD,GAAG,CAACE,IAAJ,EAAP;AACC;;AACD,gBAAM,IAAIC,KAAJ,CAAU,kCAAV,CAAN;AACH,SAVD,EAUGJ,IAVH,CAUQ,UAAAK,MAAM,EAAI;AACd,cAAIA,MAAM,CAAClB,MAAP,IAAiB,MAArB,EAA6B;AACzB;AACA,YAAA,MAAI,CAACQ,QAAL,CAAc;AACZR,cAAAA,MAAM,EAAE;AADI,aAAd;;AAGA5B,YAAAA,MAAM,CAACgC,QAAP,CAAgB0C,OAAhB,CAAwB,wDAAxB;AACH,WAND,MAMO;AACL,YAAA,MAAI,CAACtC,QAAL,CAAc;AACZR,cAAAA,MAAM,EAAE;AADI,aAAd;AAGD;AACJ,SAtBD,WAsBS,UAAUgC,KAAV,EAAiB;AACtBC,UAAAA,KAAK,CAACD,KAAK,CAACE,OAAP,CAAL;AACH,SAxBD;AAyBH,OA3BD,CA2BE,OAAOC,GAAP,EAAY;AACVC,QAAAA,IAAI,CAACD,GAAD,CAAJ;AACH;AACJ;;;gCAEYmB,M,EAAQ;AAAA;;AACnB,UAAI;AACF,YAAMC,eAAe,GAAG,uEAAxB;AACAvF,QAAAA,KAAK,CAACuF,eAAD,EAAkB;AACnB5C,UAAAA,MAAM,EAAE,MADW;AAEnBC,UAAAA,OAAO,EAAE;AACL,6BAAiB,KAAKlB,KAAL,CAAWE,aADvB;AAEL,4BAAgB;AAFX,WAFU;AAMnB+C,UAAAA,IAAI,EAAE,gBAAeW,MAAf;AANa,SAAlB,CAAL,CAOGzC,IAPH,CAOQ,UAACC,GAAD,EAAS;AACb,cAAGA,GAAG,CAACC,EAAP,EAAW;AACP,mBAAOD,GAAG,CAACE,IAAJ,EAAP;AACH;;AACD,gBAAM,IAAIC,KAAJ,CAAU,kCAAV,CAAN;AACH,SAZD,EAYGJ,IAZH,CAYQ,UAAAK,MAAM,EAAI;AACd,UAAA,MAAI,CAACV,QAAL,CAAc;AACVT,YAAAA,KAAK,EAAEmB;AADG,WAAd;;AAGA,cAAMsC,QAAQ,GAAG,CACb;AACAC,YAAAA,IAAI,EAAE,MADN;AAEAb,YAAAA,IAAI,EAAE;AAFN,WADa,CAAjB;;AAMA,UAAA,MAAI,CAACd,WAAL,CAAiB,MAAI,CAACpC,KAAL,CAAWC,MAA5B,EAAoC6D,QAApC;;AACA,cAAMrC,cAAc,GAAGC,IAAI,CAACC,KAAL,CAAWH,MAAM,CAACI,UAAlB,CAAvB;AACA,cAAMC,aAAa,GAAG;AAClB,oBAAQ,MADU;AAElB,uBAAW,UAFO;AAGlB,wBAAY;AACR,sBAAQ,QADA;AAER,wBAAU,EAFF;AAKR,sBAAQ;AACR,wBAAQ,KADA;AAER,0BAAU,UAFF;AAGR,4BAAY,CACR;AACA,0BAAQ,MADR;AAEA,0BAAQ,KAFR;AAGA,4BAAU,MAHV;AAIA,2BAAS,SAJT;AAKA,0BAAQ;AALR,iBADQ,EAQR;AACA,0BAAQ,MADR;AAEA,0BAAQ,OAFR;AAGA,4BAAU,MAHV;AAIA,0BAAQ,KAJR;AAKA,4BAAU;AALV,iBARQ,EAeR;AACA,0BAAQ,WADR;AAEA,4BAAU;AAFV,iBAfQ,EAmBR;AACA,0BAAQ,KADR;AAEA,4BAAU,UAFV;AAGA,4BAAU,KAHV;AAIA,6BAAW,IAJX;AAKA,8BAAY,CACR;AACA,4BAAQ,KADR;AAEA,8BAAU,YAFV;AAGA,gCAAY,CACR;AACA,8BAAQ,MADR;AAEA,8BAAQ,MAFR;AAGA,8BAAQ,IAHR;AAIA,+BAAS;AAJT,qBADQ,EAOR;AACA,8BAAQ,MADR;AAEA,8BAAQL,MAAM,CAACM,SAFf;AAGA,8BAAQ,IAHR;AAIA,+BAAS,SAJT;AAKA,+BAAS;AALT,qBAPQ;AAHZ,mBADQ,EAoBR;AACA,4BAAQ,KADR;AAEA,8BAAU,YAFV;AAGA,gCAAY,CACR;AACA,8BAAQ,MADR;AAEA,8BAAQ,MAFR;AAGA,8BAAQ,IAHR;AAIA,+BAAS;AAJT,qBADQ,EAOR;AACA,8BAAQ,MADR;AAEA,8BAAQN,MAAM,CAACO,OAFf;AAGA,8BAAQ,IAHR;AAIA,+BAAS,SAJT;AAKA,+BAAS;AALT,qBAPQ;AAHZ,mBApBQ,EAuCR;AACA,4BAAQ,WADR;AAEA,8BAAU;AAFV,mBAvCQ,EA2CR;AACA,4BAAQ,KADR;AAEA,8BAAU,YAFV;AAGA,8BAAU,KAHV;AAIA,gCAAY,CACR;AACA,8BAAQ,MADR;AAEA,8BAAQ,IAFR;AAGA,8BAAQ,IAHR;AAIA,+BAAS;AAJT,qBADQ,EAOR;AACA,8BAAQ,MADR;AAEA,8BAAQP,MAAM,CAACQ,SAFf;AAGA,8BAAQ,IAHR;AAIA,+BAAS,SAJT;AAKA,+BAAS;AALT,qBAPQ;AAJZ,mBA3CQ,EA+DR;AACA,4BAAQ,KADR;AAEA,8BAAU,YAFV;AAGA,gCAAY,CACR;AACA,8BAAQ,MADR;AAEA,8BAAQ,MAFR;AAGA,8BAAQ,IAHR;AAIA,+BAAS;AAJT,qBADQ,EAOR;AACA,8BAAQ,MADR;AAEA,8BAAQR,MAAM,CAACS,WAFf;AAGA,8BAAQ,IAHR;AAIA,+BAAS,SAJT;AAKA,+BAAS;AALT,qBAPQ;AAHZ,mBA/DQ,EAkFR;AACA,4BAAQ,KADR;AAEA,8BAAU,YAFV;AAGA,gCAAY,CACR;AACA,8BAAQ,MADR;AAEA,8BAAQ,KAFR;AAGA,8BAAQ,IAHR;AAIA,+BAAS;AAJT,qBADQ,EAOR;AACA,8BAAQ,MADR;AAEA,8BAAQR,cAAc,CAACS,IAFvB;AAGA,8BAAQ,IAHR;AAIA,+BAAS,SAJT;AAKA,+BAAS;AALT,qBAPQ;AAHZ,mBAlFQ;AALZ,iBAnBQ,EA+HR;AACA,0BAAQ,WADR;AAEA,4BAAU;AAFV,iBA/HQ,EAmIR;AACA,0BAAQ,KADR;AAEA,4BAAU,YAFV;AAGA,4BAAU,IAHV;AAIA,8BAAY,CACR;AACA,4BAAQ,MADR;AAEA,4BAAQ,MAFR;AAGA,4BAAQ,IAHR;AAIA,6BAAS;AAJT,mBADQ,EAOR;AACA,4BAAQ,MADR;AAEA,4BAAQ,SAFR;AAGA,6BAAS,SAHT;AAIA,4BAAQ,IAJR;AAKA,6BAAS;AALT,mBAPQ;AAJZ,iBAnIQ,EAuJR;AACA,0BAAQ,KADR;AAEA,4BAAU,YAFV;AAGA,4BAAU,IAHV;AAIA,8BAAY,CACR;AACA,4BAAQ,MADR;AAEA,4BAAQ,MAFR;AAGA,4BAAQ,IAHR;AAIA,6BAAS;AAJT,mBADQ,EAOR;AACA,4BAAQ,MADR;AAEA,4BAAQV,MAAM,CAACW,YAFf;AAGA,6BAAS,SAHT;AAIA,4BAAQ,IAJR;AAKA,6BAAS;AALT,mBAPQ;AAJZ,iBAvJQ;AAHJ;AALA;AAHM,WAAtB;;AA0LA,UAAA,MAAI,CAACC,WAAL,CAAiB,MAAI,CAACpC,KAAL,CAAWC,MAA5B,EAAoC,CAAC4B,aAAD,CAApC;;AACA3C,UAAAA,IAAI,CAACmD,WAAL;AACH,SApND,WAoNS,UAAUC,KAAV,EAAiB;AACtBC,UAAAA,KAAK,CAACD,KAAK,CAACE,OAAP,CAAL;AACH,SAtND;AAuND,OAzND,CAyNE,OAAOC,GAAP,EAAY;AACRC,QAAAA,IAAI,CAACD,GAAD,CAAJ;AACL;AACF;;;gCAEYxC,M,EAAQ6D,Q,EAAU;AAC3B,UAAI;AACA,YAAME,eAAe,GAAG,8EAAxB;AACA,YAAMf,IAAI,GAAG;AACThD,UAAAA,MAAM,EAAEA,MADC;AAET6D,UAAAA,QAAQ,EAAEA;AAFD,SAAb;AAIAxF,QAAAA,KAAK,CAAC0F,eAAD,EAAkB;AACnB/C,UAAAA,MAAM,EAAE,MADW;AAEnBC,UAAAA,OAAO,EAAE;AACT,4BAAgB;AADP,WAFU;AAKnB+B,UAAAA,IAAI,EAAE,gBAAeA,IAAf;AALa,SAAlB,CAAL,CAMG9B,IANH,CAMQ,UAACC,GAAD,EAAS;AACb,cAAGA,GAAG,CAACC,EAAP,EAAW;AACX,mBAAOD,GAAG,CAACE,IAAJ,EAAP;AACC;;AACD,gBAAM,IAAIC,KAAJ,CAAU,kCAAV,CAAN;AACH,SAXD,EAWGJ,IAXH,CAWQ,UAAAK,MAAM,EAAI,CACd;AACH,SAbD,WAaS,UAAUc,KAAV,EAAiB;AACtBC,UAAAA,KAAK,CAACD,KAAK,CAACE,OAAP,CAAL;AACH,SAfD;AAgBH,OAtBD,CAsBE,OAAOC,GAAP,EAAY;AACVC,QAAAA,IAAI,CAACD,GAAD,CAAJ;AACH;AACJ;;;6BAEQ;AAAA;;AACP,aACE,MAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAQ,QAAA,GAAG,EAAC,yCAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF,EAIE;AAAM,QAAA,KAAK,EAAE;AAACwB,UAAAA,UAAU,EAAC;AAAZ,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,MAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,MAAC,MAAD;AACE,QAAA,aAAa,EAAE;AAAE9B,UAAAA,YAAY,EAAE;AAAhB,SADjB;AAEE,QAAA,QAAQ,EAAE,kBAAAyB,MAAM,EAAI;AAClB,cAAMM,MAAM,GAAG,EAAf,CADkB,CAElB;;AACA,cAAI,CAACN,MAAM,CAACzB,YAAZ,EAA0B;AACtB+B,YAAAA,MAAM,CAAC/B,YAAP,GAAsB,UAAtB;AACH;;AACD,iBAAO+B,MAAP;AACD,SATH;AAUE,QAAA,QAAQ,EAAE,kBAACN,MAAD,QAA+B;AAAA,cAApBO,aAAoB,QAApBA,aAAoB;AACvCP,UAAAA,MAAM,CAACtD,MAAP,GAAgB,UAAhB;AACAsD,UAAAA,MAAM,CAACxD,OAAP,GAAiB,MAAI,CAACJ,KAAL,CAAWI,OAA5B;AACAwD,UAAAA,MAAM,CAACzD,GAAP,GAAa,MAAI,CAACH,KAAL,CAAWG,GAAxB;;AACA,UAAA,MAAI,CAACiE,WAAL,CAAiBR,MAAjB;;AACEO,UAAAA,aAAa,CAAC,KAAD,CAAb,CALqC,CAMvC;AACD,SAjBH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAmBC;AAAA,YAAGE,YAAH,SAAGA,YAAH;AAAA,YAAiBT,MAAjB,SAAiBA,MAAjB;AAAA,YAAyBU,aAAzB,SAAyBA,aAAzB;AAAA,eACC,MAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACG,MAAI,CAACtE,KAAL,CAAWC,MAAX,IAAqB,MAAI,CAACD,KAAL,CAAWE,aAAhC,IAAiD,MAAI,CAACF,KAAL,CAAWG,GAA5D,IAAmE,MAAI,CAACH,KAAL,CAAWI,OAA9E,IAAyF,MAAI,CAACJ,KAAL,CAAWM,MAApG,GACC,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE,MAAC,KAAD;AACE,UAAA,IAAI,EAAC,cADP;AAEE,UAAA,IAAI,EAAC,cAFP;AAGE,UAAA,KAAK,EAAG,0BAHV;AAIE,UAAA,SAAS,EAAKjC,SAJhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,EAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UARF,EASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UATF,EAWE,MAAC,MAAD;AACE,UAAA,IAAI,EAAC,QADP;AAEE,UAAA,UAAU,EAAE,SAFd;AAGE,UAAA,OAAO,EAAC,WAHV;AAIE,UAAA,KAAK,EAAC,WAJR;AAKE,UAAA,QAAQ,EAAEgG,YALZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAXF,CADD,GAuBC,MAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE,MAAC,MAAD;AAAQ,UAAA,IAAI,EAAC,cAAb;AAA4B,UAAA,KAAK,EAAC,SAAlC;AAA4C,UAAA,MAAM,EAAE,EAApD;AAAwD,UAAA,KAAK,EAAE,EAA/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,CAxBJ,CADD;AAAA,OAnBD,CADF,CADF,CAJF,CADF;AA8DD;;;;EArpB4BtG,S;;SAAZ+B,G","sourcesContent":["// Render Prop\nimport React, { Component } from 'react';\nimport styled from 'styled-components';\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport { TextField } from 'formik-material-ui';\nimport fetch from 'isomorphic-unfetch';\nimport Button from \"@material-ui/core/Button\";\nimport Box from \"@material-ui/core/Box\";\nimport Head from 'next/head';\nimport window from 'global';\nimport { Select } from 'material-ui-formik-components/Select';\nimport {\n  DatePicker,\n  MuiPickersUtilsProvider,\n} from '@material-ui/pickers';\nimport LuxonUtils from '@date-io/luxon';\nimport Loader from 'react-loader-spinner'\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\"\nrequire( \"react-datepicker/dist/react-datepicker.css\");\nvar dateFormat = require('dateformat');\n\nconst liff = window.liff;\nconst BOX = styled.div`\n  margin: 5.5em auto;\n  \n`;\nconst LOADERBOX = styled.div`\nwidth: 50%;\nmargin: 0 auto;\n`;\nconst TITLE = styled.h2`\n  color: #F8F9F9;\n  font-family: Candara;\n  text-align: center;\n  margin-bottom:-2em;\n`;\nconst CONTAINER = styled.div`\n  background: #F7F9FA;\n  height: auto;\n  width: 90%;\n  margin: 5em auto;\n  box-shadow: 5px 5px 5px 0px rgba(0, 0, 0, 0.4);\n\n  label {\n    font-family: Candara;\n    color: #1C2833;\n    font-size: 1.2em;\n    font-weight: 400;\n  }\n`;\nconst MYFORM = styled(Form)`\n  text-align: center;\n  padding-top: 2em;\n  padding-bottom: 2em;\n`;\nconst FIELD = styled(Field)`\n  width: 80%;\n  margin: auto;\n`;\nconst BUTTON = styled(Button)`\n  width: 80%;\n  variant: contained;\n`;\nconst TomatoButton = styled.button`\n  color: tomato;\n  border-color: tomato;\n  width: 80%;\n`;\n\n\nexport default class App extends Component {\n    constructor(props) {\n      super(props);\n  \n      this.state = {\n        userId : null,\n        Authorization: null,\n        ubn: null,\n        leaveId: null,\n        leave: null,\n        status: null\n      };\n    }\n\n    componentDidMount() {\n      //this.getQuery();\n      this.liffInit();\n    }\n\n    getQuery() {\n        let urlParams = new URLSearchParams(window.location.search);\n        urlParams = urlParams.toString().split(\"&\");\n        const ubn = urlParams[0].split(\"=\")[1];\n        const leaveId = urlParams[1].split(\"=\")[1];\n        this.setState({\n            leaveId: leaveId\n        })\n    }\n\n    getStaff (Authorization, ubn, email) {\n        try {\n          const URL_GETSTAFF = `https://us-central1-teddybear-dev.cloudfunctions.net/api/staff/target?ubn=${ubn}&email=${email}`;\n          fetch(URL_GETSTAFF, {\n            method: 'get',\n            headers: {\n                \"Authorization\": Authorization\n            }\n          }).then((res) => {\n            if(res.ok) {\n                return res.json();  \n            }\n            throw new Error('getStaff response was not ok.');\n          }).then(result => {\n            const substituteInfo = JSON.parse(result.substitute);\n            const messages_self = [{\n                \"type\": \"flex\",\n                \"altText\": \"代理人已拒絕假單\",\n                \"contents\": {\n                    \"type\": \"bubble\",\n                    \"styles\": {\n  \n                    },\n                    \"body\": {\n                    \"type\": \"box\",\n                    \"layout\": \"vertical\",\n                    \"contents\": [\n                        {\n                        \"type\": \"text\",\n                        \"text\": \"代理人\",\n                        \"weight\": \"bold\",\n                        \"color\": \"#1DB446\",\n                        \"size\": \"sm\"\n                        },\n                        {\n                        \"type\": \"text\",\n                        \"text\": \"已拒絕假單\",\n                        \"weight\": \"bold\",\n                        \"size\": \"xxl\",\n                        \"margin\": \"md\"\n                        },\n                        {\n                        \"type\": \"separator\",\n                        \"margin\": \"xxl\"\n                        },\n                        {\n                        \"type\": \"box\",\n                        \"layout\": \"vertical\",\n                        \"margin\": \"xxl\",\n                        \"spacing\": \"sm\",\n                        \"contents\": [\n                            {\n                            \"type\": \"box\",\n                            \"layout\": \"horizontal\",\n                            \"contents\": [\n                                {\n                                \"type\": \"text\",\n                                \"text\": \"開始日期\",\n                                \"size\": \"sm\",\n                                \"color\": \"#555555\"\n                                },\n                                {\n                                \"type\": \"text\",\n                                \"text\": this.state.leave.startDate,\n                                \"size\": \"sm\",\n                                \"color\": \"#111111\",\n                                \"align\": \"end\"\n                                }\n                            ]\n                            },\n                            {\n                            \"type\": \"box\",\n                            \"layout\": \"horizontal\",\n                            \"contents\": [\n                                {\n                                \"type\": \"text\",\n                                \"text\": \"結束日期\",\n                                \"size\": \"sm\",\n                                \"color\": \"#555555\"\n                                },\n                                {\n                                \"type\": \"text\",\n                                \"text\": this.state.leave.endDate,\n                                \"size\": \"sm\",\n                                \"color\": \"#111111\",\n                                \"align\": \"end\"\n                                }\n                            ]\n                            },\n                            {\n                            \"type\": \"separator\",\n                            \"margin\": \"xxl\"\n                            },\n                            {\n                            \"type\": \"box\",\n                            \"layout\": \"horizontal\",\n                            \"margin\": \"xxl\",\n                            \"contents\": [\n                                {\n                                \"type\": \"text\",\n                                \"text\": \"假別\",\n                                \"size\": \"sm\",\n                                \"color\": \"#555555\"\n                                },\n                                {\n                                \"type\": \"text\",\n                                \"text\": this.state.leave.leaveType,\n                                \"size\": \"sm\",\n                                \"color\": \"#111111\",\n                                \"align\": \"end\"\n                                }\n                            ]\n                            },\n                            {\n                            \"type\": \"box\",\n                            \"layout\": \"horizontal\",\n                            \"contents\": [\n                                {\n                                \"type\": \"text\",\n                                \"text\": \"請假原因\",\n                                \"size\": \"sm\",\n                                \"color\": \"#555555\"\n                                },\n                                {\n                                \"type\": \"text\",\n                                \"text\": this.state.leave.leaveReason,\n                                \"size\": \"sm\",\n                                \"color\": \"#111111\",\n                                \"align\": \"end\"\n                                }\n                            ]\n                            },\n                            {\n                            \"type\": \"box\",\n                            \"layout\": \"horizontal\",\n                            \"contents\": [\n                                {\n                                \"type\": \"text\",\n                                \"text\": \"代理人\",\n                                \"size\": \"sm\",\n                                \"color\": \"#555555\"\n                                },\n                                {\n                                \"type\": \"text\",\n                                \"text\": substituteInfo.name,\n                                \"size\": \"sm\",\n                                \"color\": \"#111111\",\n                                \"align\": \"end\"\n                                }\n                            ]\n                            }\n                        ]\n                        },\n                        {\n                        \"type\": \"separator\",\n                        \"margin\": \"xxl\"\n                        },\n                        {\n                        \"type\": \"box\",\n                        \"layout\": \"horizontal\",\n                        \"margin\": \"md\",\n                        \"contents\": [\n                            {\n                            \"type\": \"text\",\n                            \"text\": \"簽核狀態\",\n                            \"size\": \"xs\",\n                            \"color\": \"#555555\"\n                            },\n                            {\n                            \"type\": \"text\",\n                            \"text\": \"拒絕(代理人)\",\n                            \"color\": \"#ff0000\",\n                            \"size\": \"xs\",\n                            \"align\": \"end\"\n                            }\n                        ]\n                        },\n                        {\n                        \"type\": \"box\",\n                        \"layout\": \"horizontal\",\n                        \"margin\": \"md\",\n                        \"contents\": [\n                            {\n                            \"type\": \"text\",\n                            \"text\": \"拒絕原因\",\n                            \"size\": \"xs\",\n                            \"color\": \"#555555\"\n                            },\n                            {\n                            \"type\": \"text\",\n                            \"text\": this.state.leave.rejectReason,\n                            \"color\": \"#111111\",\n                            \"size\": \"xs\",\n                            \"align\": \"end\"\n                            }\n                        ]\n                        }\n                    ]\n                    }\n                }\n            }];\n            this.pushMessage(result.userId, messages_self);\n            liff.closeWindow();\n          }).catch(function (error) {\n                alert(error.message);\n          })\n        } catch (err) {\n          next(err);\n        }\n      }\n\n  \n    liffInit() {\n      try {\n        liff.init(data => {\n            const userId = data.context.userId;\n            const accessToken = liff.getAccessToken();\n            const URL_CHECKEXIST = \"https://us-central1-teddybear-dev.cloudfunctions.net/api/staff/checkExist\";\n            const body = {\n                userId: userId\n            };\n            fetch(URL_CHECKEXIST, {\n                method: 'post',\n                headers: {\n                'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(body)\n            }).then((res) => {\n                return res.text();\n            }).then(result => {\n                if (result) {\n                    this.setState({\n                        userId: userId\n                    })\n                    this.lineAuth(userId, accessToken);\n                } else {\n                    alert(\"請登入以查看假單\");\n                    window.location.replace(\"https://teddybear-dev.firebaseapp.com/signIn\");\n                }\n            })\n        }, err => {\n            alert(err.message);\n        });\n      } catch (err) {\n            next(err);\n      }\n    }\n    \n    lineAuth (userId, accessToken)  {\n      try {\n        const url = \"https://us-central1-teddybear-dev.cloudfunctions.net/api/staff/lineAuth\";\n        const body = {\n            userId: userId,\n            accessToken: accessToken\n        };\n        fetch(url, {\n            method: 'post',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(body)\n        }).then((res) => {\n            return res.json();\n        }).then(result => {\n            if (result) {\n                const ubn = result.staff.ubn;\n                //const department = result.staff.department;\n                //const email = result.staff.email;\n                const idToken = result.token.idToken;\n                this.setState({\n                    Authorization: idToken,\n                    ubn: ubn\n                })\n                this.checkStatus(idToken, ubn, this.state.leaveId);\n            } else {\n                alert(\"lineAuth no result\");\n            }\n        }).catch(function (error) {\n            alert(error.message);\n        })\n      } catch (err) {\n            next(err);\n      }\n    }\n\n    checkStatus (Authorization, ubn, id) {\n        try {\n            const URL_GETLEAVE = `https://us-central1-teddybear-dev.cloudfunctions.net/api/leave/target?ubn=${ubn}&id=${id}`;\n            fetch(URL_GETLEAVE, {\n                method: 'get',\n                headers: {\n                    Authorization: Authorization\n                }\n            }).then((res) => {\n                if(res.ok) {\n                return res.json();  \n                }\n                throw new Error('checkStatus response was not ok.');\n            }).then(result => {\n                if (result.status != \"等待簽核\") {\n                    //alert(\"此張假單已簽核\");\n                    this.setState({\n                      status: \"signed\"\n                    })\n                    window.location.replace(\"https://teddybear-dev.firebaseapp.com/alreadyApproved/\");\n                } else {\n                  this.setState({\n                    status: \"not signed\"\n                  })\n                }\n            }).catch(function (error) {\n                alert(error.message);\n            })\n        } catch (err) {\n            next(err);\n        }\n    }\n    \n    updateLeave (values) {\n      try {\n        const URL_UPDATELEAVE = \"https://us-central1-teddybear-dev.cloudfunctions.net/api/leave/update\";\n        fetch(URL_UPDATELEAVE, {\n            method: 'post',\n            headers: {\n                \"Authorization\": this.state.Authorization,\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(values)\n        }).then((res) => {\n            if(res.ok) {\n                return res.json();  \n            }\n            throw new Error('updateLeave response was not ok.');\n        }).then(result => {\n            this.setState({\n                leave: result\n            })\n            const messages = [\n                {\n                type: \"text\",\n                text: \"拒絕成功\"\n                }\n            ];\n            this.pushMessage(this.state.userId, messages);\n            const substituteInfo = JSON.parse(result.substitute);\n            const messages_self = {\n                \"type\": \"flex\",\n                \"altText\": \"代理人已拒絕假單\",\n                \"contents\": {\n                    \"type\": \"bubble\",\n                    \"styles\": {\n\n                    },\n                    \"body\": {\n                    \"type\": \"box\",\n                    \"layout\": \"vertical\",\n                    \"contents\": [\n                        {\n                        \"type\": \"text\",\n                        \"text\": \"代理人\",\n                        \"weight\": \"bold\",\n                        \"color\": \"#1DB446\",\n                        \"size\": \"sm\"\n                        },\n                        {\n                        \"type\": \"text\",\n                        \"text\": \"已拒絕假單\",\n                        \"weight\": \"bold\",\n                        \"size\": \"xxl\",\n                        \"margin\": \"md\"\n                        },\n                        {\n                        \"type\": \"separator\",\n                        \"margin\": \"xxl\"\n                        },\n                        {\n                        \"type\": \"box\",\n                        \"layout\": \"vertical\",\n                        \"margin\": \"xxl\",\n                        \"spacing\": \"sm\",\n                        \"contents\": [\n                            {\n                            \"type\": \"box\",\n                            \"layout\": \"horizontal\",\n                            \"contents\": [\n                                {\n                                \"type\": \"text\",\n                                \"text\": \"開始日期\",\n                                \"size\": \"sm\",\n                                \"color\": \"#555555\"\n                                },\n                                {\n                                \"type\": \"text\",\n                                \"text\": result.startDate,\n                                \"size\": \"sm\",\n                                \"color\": \"#111111\",\n                                \"align\": \"end\"\n                                }\n                            ]\n                            },\n                            {\n                            \"type\": \"box\",\n                            \"layout\": \"horizontal\",\n                            \"contents\": [\n                                {\n                                \"type\": \"text\",\n                                \"text\": \"結束日期\",\n                                \"size\": \"sm\",\n                                \"color\": \"#555555\"\n                                },\n                                {\n                                \"type\": \"text\",\n                                \"text\": result.endDate,\n                                \"size\": \"sm\",\n                                \"color\": \"#111111\",\n                                \"align\": \"end\"\n                                }\n                            ]\n                            },\n                            {\n                            \"type\": \"separator\",\n                            \"margin\": \"xxl\"\n                            },\n                            {\n                            \"type\": \"box\",\n                            \"layout\": \"horizontal\",\n                            \"margin\": \"xxl\",\n                            \"contents\": [\n                                {\n                                \"type\": \"text\",\n                                \"text\": \"假別\",\n                                \"size\": \"sm\",\n                                \"color\": \"#555555\"\n                                },\n                                {\n                                \"type\": \"text\",\n                                \"text\": result.leaveType,\n                                \"size\": \"sm\",\n                                \"color\": \"#111111\",\n                                \"align\": \"end\"\n                                }\n                            ]\n                            },\n                            {\n                            \"type\": \"box\",\n                            \"layout\": \"horizontal\",\n                            \"contents\": [\n                                {\n                                \"type\": \"text\",\n                                \"text\": \"請假原因\",\n                                \"size\": \"sm\",\n                                \"color\": \"#555555\"\n                                },\n                                {\n                                \"type\": \"text\",\n                                \"text\": result.leaveReason,\n                                \"size\": \"sm\",\n                                \"color\": \"#111111\",\n                                \"align\": \"end\"\n                                }\n                            ]\n                            },\n                            {\n                            \"type\": \"box\",\n                            \"layout\": \"horizontal\",\n                            \"contents\": [\n                                {\n                                \"type\": \"text\",\n                                \"text\": \"代理人\",\n                                \"size\": \"sm\",\n                                \"color\": \"#555555\"\n                                },\n                                {\n                                \"type\": \"text\",\n                                \"text\": substituteInfo.name,\n                                \"size\": \"sm\",\n                                \"color\": \"#111111\",\n                                \"align\": \"end\"\n                                }\n                            ]\n                            }\n                        ]\n                        },\n                        {\n                        \"type\": \"separator\",\n                        \"margin\": \"xxl\"\n                        },\n                        {\n                        \"type\": \"box\",\n                        \"layout\": \"horizontal\",\n                        \"margin\": \"md\",\n                        \"contents\": [\n                            {\n                            \"type\": \"text\",\n                            \"text\": \"簽核狀態\",\n                            \"size\": \"xs\",\n                            \"color\": \"#555555\"\n                            },\n                            {\n                            \"type\": \"text\",\n                            \"text\": \"拒絕(代理人)\",\n                            \"color\": \"#ff0000\",\n                            \"size\": \"xs\",\n                            \"align\": \"end\"\n                            }\n                        ]\n                        },\n                        {\n                        \"type\": \"box\",\n                        \"layout\": \"horizontal\",\n                        \"margin\": \"md\",\n                        \"contents\": [\n                            {\n                            \"type\": \"text\",\n                            \"text\": \"拒絕原因\",\n                            \"size\": \"xs\",\n                            \"color\": \"#555555\"\n                            },\n                            {\n                            \"type\": \"text\",\n                            \"text\": result.rejectReason,\n                            \"color\": \"#111111\",\n                            \"size\": \"xs\",\n                            \"align\": \"end\"\n                            }\n                        ]\n                        }\n                    ]\n                    }\n                }\n            };\n            this.pushMessage(this.state.userId, [messages_self]);\n            liff.closeWindow();\n        }).catch(function (error) {\n            alert(error.message);\n        })\n      } catch (err) {\n            next(err);\n      }\n    }\n\n    pushMessage (userId, messages) {\n        try {\n            const URL_PUSHMESSAGE = \"https://us-central1-teddybear-dev.cloudfunctions.net/api/message/pushMessage\";\n            const body = {\n                userId: userId,\n                messages: messages\n            }\n            fetch(URL_PUSHMESSAGE, {\n                method: 'post',\n                headers: {\n                'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(body)\n            }).then((res) => {\n                if(res.ok) {\n                return res.json();  \n                }\n                throw new Error('pushMessage response was not ok.');\n            }).then(result => {\n                //liff.closeWindow();\n            }).catch(function (error) {\n                alert(error.message);\n            })\n        } catch (err) {\n            next(err);\n        }\n    }\n  \n    render() {\n      return (\n        <BOX>\n          <Head>\n            <script src=\"https://d.line-scdn.net/liff/1.0/sdk.js\"></script>\n          </Head>\n          <body style={{background:'#34495E'}}>\n            <BOX>\n              <Formik\n                initialValues={{ rejectReason: '' }}\n                validate={values => {\n                  const errors = {};\n                  // check for rejectReason\n                  if (!values.rejectReason) {\n                      errors.rejectReason = 'Required';\n                  }                 \n                  return errors;                 \n                }}\n                onSubmit={(values, { setSubmitting }) => {\n                  values.status = \"拒絕 (代理人)\";\n                  values.leaveId = this.state.leaveId;\n                  values.ubn = this.state.ubn;\n                  this.updateLeave(values);\n                    setSubmitting(false);\n                  //console.log('submitting', values);\n                }}\n              >\n              {({ isSubmitting, values, setFieldValue}) => (\n                <CONTAINER>\n                  {this.state.userId && this.state.Authorization && this.state.ubn && this.state.leaveId && this.state.status ?\n                    <MYFORM>\n                      <FIELD \n                        type=\"rejectReason\" \n                        name=\"rejectReason\" \n                        label = \"拒絕原因\" \n                        component = { TextField }\n                      />\n\n                      <br></br>\n                      <br></br>\n\n                      <BUTTON\n                        type=\"submit\"\n                        fontFamily= \"Candara\"\n                        variant=\"contained\"\n                        color=\"secondary\"\n                        disabled={isSubmitting}\n                      >\n                      送出\n                      </BUTTON>\n                      \n                    </MYFORM> :\n                    <LOADERBOX>\n                      <Loader type=\"BallTriangle\" color=\"#00BFFF\" height={80} width={80} />\n                    </LOADERBOX>\n                  }\n                </CONTAINER>\n              )}\n              </Formik>\n            </BOX>\n          </body>\n        </BOX>   \n      );\n    }\n  }"]},"metadata":{},"sourceType":"module"}