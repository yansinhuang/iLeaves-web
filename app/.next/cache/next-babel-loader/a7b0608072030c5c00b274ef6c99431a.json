{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nvar __jsx = React.createElement;\nimport Head from 'next/head';\nimport React, { Component } from 'react';\nimport ReactTable from \"react-table\"; //import \"react-table/react-table.css\";\n\nconst liffInit = async () => {\n  liff.init(data => {\n    const userId = data.context.userId;\n    const accessToken = liff.getAccessToken(); //alert(\"success\");\n    //alert(userId);\n\n    const URL_CHECKEXIST = \"https://us-central1-teddybear-dev.cloudfunctions.net/api/staff/checkExist\";\n    const body = {\n      userId: userId\n    };\n    fetch(URL_CHECKEXIST, {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: _JSON$stringify(body)\n    }).then(res => {\n      return res.text();\n    }).then(result => {\n      if (result) {\n        alert(userId);\n        alert(accessToken);\n        lineAuth(userId, accessToken);\n      } else {\n        alert(\"請登入以查看假單\");\n        window.location.replace(\"https://teddybear-dev.firebaseapp.com/signIn\");\n      }\n    });\n  }, err => {\n    alert(\"error\");\n  });\n};\n\nconst lineAuth = async (userId, accessToken) => {\n  const url = \"https://us-central1-teddybear-dev.cloudfunctions.net/api/staff/lineAuth\";\n  const body = {\n    userId: userId,\n    accessToken: accessToken\n  };\n  fetch(url, {\n    method: 'post',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: _JSON$stringify(body)\n  }).then(res => {\n    return res.json();\n  }).then(result => {\n    if (result) {\n      alert(\"success\"); //alert(result.staff);\n      //alert(result);\n\n      const ubn = result.staff.ubn;\n      const email = result.staff.email;\n      const idToken = result.token.idToken;\n      getLeaves(ubn, email, idToken);\n    } else {\n      alert(\"lineAuth no result\");\n    }\n  }).catch(function (error) {\n    alert(error.message);\n  });\n};\n\nconst getLeaves = async (ubn, email, idToken) => {\n  const url_pre = \"https://us-central1-teddybear-dev.cloudfunctions.net/api/leave/get\";\n  const url = url_pre + `?ubn=${ubn}&query=email&value=${email}`;\n  const header = {\n    Authorization: idToken\n  };\n  fetch(url, {\n    method: 'get',\n    headers: header\n  }).then(res => {\n    return res.text();\n  }).then(result => {\n    if (result) {\n      alert(\"success\");\n    } else {\n      alert(\"getLeaves no result\");\n    }\n  }).catch(function (error) {\n    alert(error.message);\n  });\n};\n\nliffInit();\n\nconst Basic = () => __jsx(Head, null, __jsx(\"script\", {\n  src: \"https://d.line-scdn.net/liff/1.0/sdk.js\"\n})); //export default Basic;\n\n\nexport default class App extends Component {\n  render() {\n    const data = [{\n      name: 'Roy Agasthyan',\n      age: 26\n    }, {\n      name: 'Sam Thomason',\n      age: 22\n    }, {\n      name: 'Michael Jackson',\n      age: 36\n    }, {\n      name: 'Samuel Roy',\n      age: 56\n    }, {\n      name: 'Rima Soy',\n      age: 28\n    }, {\n      name: 'Suzi Eliamma',\n      age: 28\n    }];\n    const columns = [{\n      Header: 'Name',\n      accessor: 'name'\n    }, {\n      Header: 'Age',\n      accessor: 'age'\n    }];\n    return __jsx(\"div\", null, __jsx(ReactTable, {\n      data: data,\n      columns: columns,\n      defaultPageSize: 3,\n      pageSizeOptions: [3, 6]\n    }));\n  }\n\n}","map":null,"metadata":{},"sourceType":"module"}